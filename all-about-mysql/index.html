<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL | Ray Wei&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.8ad819f8.css" as="style"><link rel="preload" href="/assets/js/app.a56c6d1d.js" as="script"><link rel="preload" href="/assets/js/3.16bfab84.js" as="script"><link rel="preload" href="/assets/js/1.92468ed9.js" as="script"><link rel="preload" href="/assets/js/20.3486b5a0.js" as="script"><link rel="prefetch" href="/assets/js/10.4ca6eac3.js"><link rel="prefetch" href="/assets/js/11.f93ac30e.js"><link rel="prefetch" href="/assets/js/12.031a2357.js"><link rel="prefetch" href="/assets/js/13.797d374f.js"><link rel="prefetch" href="/assets/js/14.93bb9280.js"><link rel="prefetch" href="/assets/js/15.179bb753.js"><link rel="prefetch" href="/assets/js/16.6684586f.js"><link rel="prefetch" href="/assets/js/17.7f63cd3d.js"><link rel="prefetch" href="/assets/js/18.9da20c31.js"><link rel="prefetch" href="/assets/js/19.06ffe7e6.js"><link rel="prefetch" href="/assets/js/21.71aede5e.js"><link rel="prefetch" href="/assets/js/22.f9187d45.js"><link rel="prefetch" href="/assets/js/23.b1df3fee.js"><link rel="prefetch" href="/assets/js/24.2eeb130b.js"><link rel="prefetch" href="/assets/js/25.235c6446.js"><link rel="prefetch" href="/assets/js/26.f23c3b67.js"><link rel="prefetch" href="/assets/js/27.e75a846b.js"><link rel="prefetch" href="/assets/js/28.696de3df.js"><link rel="prefetch" href="/assets/js/29.7f0ae72b.js"><link rel="prefetch" href="/assets/js/30.6da87c61.js"><link rel="prefetch" href="/assets/js/31.236a5e76.js"><link rel="prefetch" href="/assets/js/32.165f73ac.js"><link rel="prefetch" href="/assets/js/33.b24024b7.js"><link rel="prefetch" href="/assets/js/34.da5f8eea.js"><link rel="prefetch" href="/assets/js/35.b86a5309.js"><link rel="prefetch" href="/assets/js/36.1fb19995.js"><link rel="prefetch" href="/assets/js/37.18e766be.js"><link rel="prefetch" href="/assets/js/38.8c09164c.js"><link rel="prefetch" href="/assets/js/39.4feb025b.js"><link rel="prefetch" href="/assets/js/4.e2b25f4c.js"><link rel="prefetch" href="/assets/js/40.ed14fc2a.js"><link rel="prefetch" href="/assets/js/41.b0ca3d75.js"><link rel="prefetch" href="/assets/js/42.8f653507.js"><link rel="prefetch" href="/assets/js/43.57ee717e.js"><link rel="prefetch" href="/assets/js/44.bf1e83bc.js"><link rel="prefetch" href="/assets/js/45.e53ae355.js"><link rel="prefetch" href="/assets/js/46.850a3828.js"><link rel="prefetch" href="/assets/js/47.134d5d46.js"><link rel="prefetch" href="/assets/js/48.b7e535fd.js"><link rel="prefetch" href="/assets/js/49.ad17a172.js"><link rel="prefetch" href="/assets/js/5.582f0acf.js"><link rel="prefetch" href="/assets/js/50.ff9b873d.js"><link rel="prefetch" href="/assets/js/51.580a0f4a.js"><link rel="prefetch" href="/assets/js/52.47906e1b.js"><link rel="prefetch" href="/assets/js/53.fd7cded7.js"><link rel="prefetch" href="/assets/js/54.423ca0a1.js"><link rel="prefetch" href="/assets/js/55.17dfc653.js"><link rel="prefetch" href="/assets/js/56.8184ef3a.js"><link rel="prefetch" href="/assets/js/57.125e7c5f.js"><link rel="prefetch" href="/assets/js/58.bdc19c34.js"><link rel="prefetch" href="/assets/js/59.e0f01c7c.js"><link rel="prefetch" href="/assets/js/6.202ce5ad.js"><link rel="prefetch" href="/assets/js/60.efbea1f4.js"><link rel="prefetch" href="/assets/js/61.dc22c3dc.js"><link rel="prefetch" href="/assets/js/62.6b70ee76.js"><link rel="prefetch" href="/assets/js/63.3b241354.js"><link rel="prefetch" href="/assets/js/64.e8ed1655.js"><link rel="prefetch" href="/assets/js/65.1936264d.js"><link rel="prefetch" href="/assets/js/66.2c6dcb6e.js"><link rel="prefetch" href="/assets/js/67.c76b1045.js"><link rel="prefetch" href="/assets/js/68.8f14d8f4.js"><link rel="prefetch" href="/assets/js/69.9b30b010.js"><link rel="prefetch" href="/assets/js/7.a683f1aa.js"><link rel="prefetch" href="/assets/js/70.e9dce451.js"><link rel="prefetch" href="/assets/js/71.551dc5bb.js"><link rel="prefetch" href="/assets/js/72.89cffa34.js"><link rel="prefetch" href="/assets/js/73.1c34943f.js"><link rel="prefetch" href="/assets/js/74.c45302f4.js"><link rel="prefetch" href="/assets/js/8.a9ae2c8c.js"><link rel="prefetch" href="/assets/js/9.485fe8d3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8ad819f8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-130b300a><div data-v-130b300a><div class="password-shadow password-wrapper-out" style="display:none;" data-v-25ba6db2 data-v-130b300a data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>Ray Wei's Blog</h3> <p class="description" data-v-25ba6db2 data-v-25ba6db2></p> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>Ray Wei</span>
            
          <span data-v-25ba6db2>2021 - </span>
          2022
        </a></span></div></div> <div class="hide" data-v-130b300a><header class="navbar" data-v-130b300a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Ray Wei's Blog</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Java 自学
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-1-junior/0.初级.html" class="nav-link"><i class="undefined"></i>
  初级
</a></li><li class="dropdown-item"><!----> <a href="/java-2-senior/0.高级.html" class="nav-link"><i class="undefined"></i>
  高级
</a></li><li class="dropdown-item"><!----> <a href="/java-3-master/0.大师级.html" class="nav-link"><i class="undefined"></i>
  大师级
</a></li><li class="dropdown-item"><!----> <a href="/Git相关命令.html" class="nav-link"><i class="undefined"></i>
  Git
</a></li></ul></div></div><div class="nav-item"><a href="/db/DBMS.html" class="nav-link"><i class="undefined"></i>
  数据库
</a></div><div class="nav-item"><a href="/ops/0.index.html" class="nav-link"><i class="undefined"></i>
  运维
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      OS
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/macos/macOS使用技巧.html" class="nav-link"><i class="undefined"></i>
  macOS
</a></li><li class="dropdown-item"><!----> <a href="/os/windows/使用Git Bash在Windows上安装zsh和oh-my-zsh.html" class="nav-link"><i class="undefined"></i>
  Windows
</a></li><li class="dropdown-item"><!----> <a href="/os/linux/Linux的须知与使用.html" class="nav-link"><i class="undefined"></i>
  Linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      blog
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/macOS使用Vuepress和Github搭建博客2022.html" class="nav-link"><i class="undefined"></i>
  Vuepress
</a></li><li class="dropdown-item"><!----> <a href="/blog/macOS使用Hexo和Github搭建博客2021.html" class="nav-link"><i class="undefined"></i>
  Hexo
</a></li></ul></div></div><div class="nav-item"><a href="/excerpt/艺术家们.html" class="nav-link"><i class="undefined"></i>
  书摘
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-130b300a></div> <aside class="sidebar" data-v-130b300a><div class="personal-info-wrapper" data-v-39576ba9 data-v-130b300a><!----> <h3 class="name" data-v-39576ba9>
    Ray Wei
  </h3> <div class="num" data-v-39576ba9><div data-v-39576ba9><h3 data-v-39576ba9>59</h3> <h6 data-v-39576ba9>Articles</h6></div> <div data-v-39576ba9><h3 data-v-39576ba9>12</h3> <h6 data-v-39576ba9>Tags</h6></div></div> <ul class="social-links" data-v-39576ba9></ul> <hr data-v-39576ba9></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      Java 自学
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java-1-junior/0.初级.html" class="nav-link"><i class="undefined"></i>
  初级
</a></li><li class="dropdown-item"><!----> <a href="/java-2-senior/0.高级.html" class="nav-link"><i class="undefined"></i>
  高级
</a></li><li class="dropdown-item"><!----> <a href="/java-3-master/0.大师级.html" class="nav-link"><i class="undefined"></i>
  大师级
</a></li><li class="dropdown-item"><!----> <a href="/Git相关命令.html" class="nav-link"><i class="undefined"></i>
  Git
</a></li></ul></div></div><div class="nav-item"><a href="/db/DBMS.html" class="nav-link"><i class="undefined"></i>
  数据库
</a></div><div class="nav-item"><a href="/ops/0.index.html" class="nav-link"><i class="undefined"></i>
  运维
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      OS
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/os/macos/macOS使用技巧.html" class="nav-link"><i class="undefined"></i>
  macOS
</a></li><li class="dropdown-item"><!----> <a href="/os/windows/使用Git Bash在Windows上安装zsh和oh-my-zsh.html" class="nav-link"><i class="undefined"></i>
  Windows
</a></li><li class="dropdown-item"><!----> <a href="/os/linux/Linux的须知与使用.html" class="nav-link"><i class="undefined"></i>
  Linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      blog
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog/macOS使用Vuepress和Github搭建博客2022.html" class="nav-link"><i class="undefined"></i>
  Vuepress
</a></li><li class="dropdown-item"><!----> <a href="/blog/macOS使用Hexo和Github搭建博客2021.html" class="nav-link"><i class="undefined"></i>
  Hexo
</a></li></ul></div></div><div class="nav-item"><a href="/excerpt/艺术家们.html" class="nav-link"><i class="undefined"></i>
  书摘
</a></div> <!----></nav> <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>index</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dbms/" class="sidebar-link">DBMS</a></li><li><a href="/db-nf/" class="sidebar-link">数据库设计的三大范式</a></li><li><a href="/all-about-mysql/" aria-current="page" class="active sidebar-link">MySQL</a></li><li><a href="/redis-commandline/" class="sidebar-link">Redis命令行操作</a></li></ul></section></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-25ba6db2 data-v-130b300a><h3 class="title" data-v-25ba6db2 data-v-25ba6db2>MySQL</h3> <!----> <label id="box" class="inputBox" data-v-25ba6db2 data-v-25ba6db2><input type="password" value="" data-v-25ba6db2> <span data-v-25ba6db2>Konck! Knock!</span> <button data-v-25ba6db2>OK</button></label> <div class="footer" data-v-25ba6db2 data-v-25ba6db2><span data-v-25ba6db2><i class="iconfont reco-theme" data-v-25ba6db2></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-25ba6db2>vuePress-theme-reco</a></span> <span data-v-25ba6db2><i class="iconfont reco-copyright" data-v-25ba6db2></i> <a data-v-25ba6db2><span data-v-25ba6db2>Ray Wei</span>
            
          <span data-v-25ba6db2>2021 - </span>
          2022
        </a></span></div></div> <div data-v-130b300a><main class="page"><section><div class="page-title"><h1 class="title">MySQL</h1> <div data-v-f875f3fc><i class="iconfont reco-account" data-v-f875f3fc><span data-v-f875f3fc>Ray Wei</span></i> <i class="iconfont reco-date" data-v-f875f3fc><span data-v-f875f3fc>11/19/2021</span></i> <!----> <i class="tags iconfont reco-tag" data-v-f875f3fc><span class="tag-item" data-v-f875f3fc>DataBase</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="_1-概述"><a href="#_1-概述" class="header-anchor">#</a> 1. 概述</h2> <p>MySQL数据库最初是由瑞典MySQL AB公司开发，2008年1月16号被Sun公司收购。2009年，SUN又被Oracle收购。MySQL是目前IT行业最流行的开放源代码的数据库管理系统，同时它也是一个支持多线程高并发多用户的关系型数据库管理系统。MySQL之所以受到业界人士的青睐，主要是因为其具有以下几方面优点：</p> <h3 id="_1-1-开放源代码"><a href="#_1-1-开放源代码" class="header-anchor">#</a> 1.1. 开放源代码</h3> <p>MySQL最强大的优势之一在于它是一个开放源代码的数据库管理系统。开源的特点是给予了用户根据自己需要修改DBMS的自由。MySQL采用了General Public License，这意味着授予用户阅读、修改和优化源代码的权利，这样即使是免费版的MySQL的功能也足够强大，这也是为什么MySQL越来越受欢迎的主要原因。</p> <h3 id="_1-2-跨平台"><a href="#_1-2-跨平台" class="header-anchor">#</a> 1.2. 跨平台</h3> <p>MySQL可以在不同的操作系统下运行，简单地说，MySQL可以支持Windows系统、UNIX系统、Linux系统等多种操作系统平台。这意味着在一个操作系统中实现的应用程序可以很方便地移植到其他的操作系统下。</p> <h3 id="_1-3-轻量级"><a href="#_1-3-轻量级" class="header-anchor">#</a> 1.3. 轻量级</h3> <p>MySQL的核心程序完全采用多线程编程，这些线程都是轻量级的进程，它在灵活地为用户提供服务的同时，又不会占用过多的系统资源。因此MySQL能够更快速、高效的处理数据。</p> <h3 id="_1-4-成本低"><a href="#_1-4-成本低" class="header-anchor">#</a> 1.4. 成本低</h3> <p>MySQL分为社区版和企业版，社区版是完全免费的，而企业版是收费的。即使在开发中需要用到一些付费的附加功能，价格相对于昂贵的Oracle、DB2等也是有很大优势的。其实免费的社区版也支持多种数据类型和正规的SQL查询语言，能够对数据进行各种查询、增加、删除、修改等操作，所以一般情况下社区版就可以满足开发需求了，而对数据库可靠性要求比较高的企业可以选择企业版。</p> <h2 id="_2-常见命令"><a href="#_2-常见命令" class="header-anchor">#</a> 2. 常见命令</h2> <p>登陆mysql：</p> <ol><li>mysql -u用户名 -p密码</li> <li>mysql -u用户名 -p</li></ol> <p>连接远程的mysql：mysql -h主机地址 -P 端口号 -u用户名  -p密码</p> <p>当前DBMS中，有哪些DB: show databases;</p> <p>新建数据库：create database 名字;</p> <p>新建数据库并指定编码方式：create database 数据库名 charset 编码名;</p> <p>打开数据库：</p> <p>删除数据库：drop database 名字;</p> <p>创建表：create table 表名(字段名 数据类型);</p> <p>删除表：drop table 表名;</p> <p>展示当前库中所有的表：show tables;</p> <p>添加一条数据：insert into 表名 values(字段的值);</p> <p>查看表中的数据：select * from 表名;</p> <p>数据库里没有char类型，只有字符串，quotes and double quotes都可以用。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">&quot;Rose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'Mary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>查看当前mysql的编码方式：show variables like 'character%';</p> <h2 id="_3-数据类型"><a href="#_3-数据类型" class="header-anchor">#</a> 3. 数据类型</h2> <h3 id="_3-1-整数类型"><a href="#_3-1-整数类型" class="header-anchor">#</a> 3.1 整数类型</h3> <table><thead><tr><th>Integer Type</th> <th>Byte</th> <th>Signed Number</th> <th>Unsigned Number</th></tr></thead> <tbody><tr><td>TINYINT</td> <td>1</td> <td>[-128, 127]</td> <td>[0, 255]</td></tr> <tr><td>SAMLLINT</td> <td>2</td> <td>[-32k, 32K]</td> <td>[0, 65K]</td></tr> <tr><td>MEDIUMINT</td> <td>3</td> <td>[-8M, 8M]</td> <td>[0, 16M]</td></tr> <tr><td>INT或INTEGER</td> <td>4</td> <td>[-2B, 2B]</td> <td>[0, 4B]</td></tr> <tr><td>BIGINT</td> <td>8</td> <td></td> <td></td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> inttest<span class="token punctuation">(</span>
id <span class="token keyword">int</span><span class="token punctuation">,</span>
age <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> zerofill
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>age int(4) unsigned zerofill</p> <p>此字段必须存入无符号的数字，且输入值不满足4位数的时候，会自动用0填充。</p> <p>age int(4)</p> <p>没有unsigned zerofill，不会自动填充。</p> <h3 id="_3-2-浮点型"><a href="#_3-2-浮点型" class="header-anchor">#</a> 3.2 浮点型</h3> <table><thead><tr><th>Floating-point Type</th> <th>Byte</th> <th>Signed Number</th> <th>Unsigned Number</th></tr></thead> <tbody><tr><td>FLOAT</td> <td>4</td> <td></td> <td></td></tr> <tr><td>DOUBLE</td> <td>8</td> <td></td> <td></td></tr> <tr><td>DECIMAL</td> <td>对DECIMAL(M,D) ，如果M&gt;D，为M+2；否则为D+2</td> <td></td> <td></td></tr></tbody></table> <p>DOUBLE(5, 3);</p> <p>代表此字段有三位小数，5-3=2位整数，超过就会四舍五入。</p> <p>若不加(M,D)，则【小数点后】可以存入最大宽度的值是：最大到16位，超过16位就会四舍五入。</p> <p>DECIMAL(M,D)</p> <p>M最大为65,D最大为30.</p> <p>如果不加(M,D)，那么只会储存整数位，超过就会四舍五入。</p> <h3 id="_3-3-日期时间类型"><a href="#_3-3-日期时间类型" class="header-anchor">#</a> 3.3 日期时间类型</h3> <table><thead><tr><th style="text-align:left;">类型</th> <th style="text-align:left;">大小 ( bytes)</th> <th style="text-align:left;">范围</th> <th style="text-align:left;">格式</th> <th style="text-align:left;">用途</th></tr></thead> <tbody><tr><td style="text-align:left;">DATE</td> <td style="text-align:left;">3</td> <td style="text-align:left;">1000-01-01/9999-12-31</td> <td style="text-align:left;">YYYY-MM-DD</td> <td style="text-align:left;">日期值</td></tr> <tr><td style="text-align:left;">TIME</td> <td style="text-align:left;">3</td> <td style="text-align:left;">'-838:59:59'/'838:59:59'</td> <td style="text-align:left;">HH:MM:SS</td> <td style="text-align:left;">时间值或持续时间</td></tr> <tr><td style="text-align:left;">YEAR</td> <td style="text-align:left;">1</td> <td style="text-align:left;">1901/2155</td> <td style="text-align:left;">YYYY</td> <td style="text-align:left;">年份值</td></tr> <tr><td style="text-align:left;">DATETIME</td> <td style="text-align:left;">8</td> <td style="text-align:left;">1000-01-01 00:00:00/9999-12-31 23:59:59</td> <td style="text-align:left;">YYYY-MM-DD HH:MM:SS</td> <td style="text-align:left;">混合日期和时间值</td></tr> <tr><td style="text-align:left;">TIMESTAMP</td> <td style="text-align:left;">4</td> <td style="text-align:left;">1970-01-01 00:00:00/2038结束时间是第 <strong>2147483647</strong> 秒，北京时间 <strong>2038-1-19 11:14:07</strong>，格林尼治时间 2038年1月19日 凌晨 03:14:07</td> <td style="text-align:left;">YYYYMMDD HHMMSS</td> <td style="text-align:left;">混合日期和时间值，时间戳</td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> datatest<span class="token punctuation">(</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> date1 <span class="token keyword">datetime</span><span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> date2 <span class="token keyword">timestamp</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">;</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> datatest <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> datatest<span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">---------------------+---------------------+</span>
<span class="token operator">|</span> date1               <span class="token operator">|</span> date2               <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+---------------------+</span>
<span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">18</span>:<span class="token number">23</span>:<span class="token number">20</span> <span class="token operator">|</span> <span class="token number">2021</span><span class="token operator">-</span><span class="token number">11</span><span class="token operator">-</span><span class="token number">18</span> <span class="token number">18</span>:<span class="token number">23</span>:<span class="token number">20</span> <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">---------------------+---------------------+</span>
</code></pre></div><blockquote><p>now()是mysql的函数，用于获取当前的时间。</p></blockquote> <p>timestamp和datetime的区别：</p> <ul><li>timestamp范围比较小</li> <li>timestamp和时区有关
<ul><li>show variables like 'time_zone';</li> <li>set time_zone = '+9:00';</li></ul></li> <li>表中的第一个非空的timestamp字段如果插入和更新为NULL则会自动设置为系统时间(????? 我自己试了就是空啊。)</li></ul> <h3 id="_3-4-字符串类型"><a href="#_3-4-字符串类型" class="header-anchor">#</a> 3.4 字符串类型</h3> <table><thead><tr><th style="text-align:left;">类型</th> <th style="text-align:left;">大小</th> <th style="text-align:left;">用途</th></tr></thead> <tbody><tr><td style="text-align:left;">CHAR(M)</td> <td style="text-align:left;">0-255 bytes,不指定默认char(1)</td> <td style="text-align:left;">定长字符串(假设指定长度为10，哪怕字段值的长度是5，也还是占用10个字节)</td></tr> <tr><td style="text-align:left;">VARCHAR(M)</td> <td style="text-align:left;">0-65535 bytes,必须指定M</td> <td style="text-align:left;">变长字符串(在指定范围内，用了多少占多少字节)</td></tr> <tr><td style="text-align:left;">BINARY(M)</td> <td style="text-align:left;">0-255 bytes</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">VARBINARY(M)</td> <td style="text-align:left;">0-65535 bytes</td> <td style="text-align:left;"></td></tr> <tr><td style="text-align:left;">TINYBLOB</td> <td style="text-align:left;">0-255 bytes</td> <td style="text-align:left;">不超过 255 个字符的二进制字符串</td></tr> <tr><td style="text-align:left;">TINYTEXT</td> <td style="text-align:left;">0-255 bytes</td> <td style="text-align:left;">短文本字符串</td></tr> <tr><td style="text-align:left;">BLOB</td> <td style="text-align:left;">0-65 535 bytes</td> <td style="text-align:left;">二进制形式的长文本数据</td></tr> <tr><td style="text-align:left;">TEXT</td> <td style="text-align:left;">0-65 535 bytes</td> <td style="text-align:left;">长文本数据</td></tr> <tr><td style="text-align:left;">MEDIUMBLOB</td> <td style="text-align:left;">0-16 777 215 bytes</td> <td style="text-align:left;">二进制形式的中等长度文本数据</td></tr> <tr><td style="text-align:left;">MEDIUMTEXT</td> <td style="text-align:left;">0-16 777 215 bytes</td> <td style="text-align:left;">中等长度文本数据</td></tr> <tr><td style="text-align:left;">LONGBLOB</td> <td style="text-align:left;">0-4 294 967 295 bytes</td> <td style="text-align:left;">二进制形式的极大文本数据</td></tr> <tr><td style="text-align:left;">LONGTEXT</td> <td style="text-align:left;">0-4 294 967 295 bytes</td> <td style="text-align:left;">极大文本数据</td></tr></tbody></table> <ul><li>字符串类型char,varchar(M)</li></ul> <blockquote><p>char如果没有指定宽度，默认为1个字符</p> <p>varchar(M)，必须指定宽度</p></blockquote> <ul><li>BINARY 和 VARBINARY 类似于 CHAR 和 VARCHAR，不同的是它们包含二进制字符串而不要非二进制字符串。也就是说，它们包含字节字符串而不是字符字符串。这说明它们没有字符集，并且排序和比较基于列值字节的数值值。</li> <li>一般在保存少量字符串的时候，我们会选择char和varchar；而在保存较大文本时，通常会选择使用text或blob系列。blob和text值会引起一些性能问题，特别是在执行了大量的删除操作时，会在数据表中留下很大的“空洞”，为了提高性能，建议定期时候用optimize table功能对这类表进行碎片整理。可以使用合成的(Synthetic)索引来提高大文本字段的查询性能，如果需要对大文本字段进行模糊查询，MySql提供了前缀索引。但是仍然要在不必要的时候避免检索大型的blob或text值。</li></ul> <h4 id="enum枚举类型"><a href="#enum枚举类型" class="header-anchor">#</a> enum枚举类型</h4> <p>它的值范围需要在创建表时通过枚举方式显式指定，对于1~255个成员的枚举需要1个字节存储；对于255`65535个成员需要2个字节存储。例如：gender enum('男','女')。一次只能从枚举值中选择一个。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> enumtest<span class="token punctuation">(</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> sex <span class="token keyword">enum</span><span class="token punctuation">(</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;女&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token keyword">insert</span> <span class="token keyword">into</span> enumtest <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;男&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- Query OK, 1 row affected (0.00 sec)</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> enumtest <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;公&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;金毛&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- ERROR 1265 (01000): Data truncated for column 'sex' at row 1</span>
</code></pre></div><h4 id="set集合类型"><a href="#set集合类型" class="header-anchor">#</a> set集合类型</h4> <p>最多存放0~64个成员。一次可以从集合中选择多个成员。</p> <p>如果选择了1-8个成员的集合，则依次占1个，2个，3个。。8个字节。？？？？</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> settest<span class="token punctuation">(</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
               <span class="token comment">--  1=2^0  2=2^1  4      8           二进制</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> hobby <span class="token keyword">set</span><span class="token punctuation">(</span><span class="token string">&quot;sleep&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;eat&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;swim&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;exercise&quot;</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
    
<span class="token keyword">insert</span> <span class="token keyword">into</span> settest <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;Judy&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;sleep&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- Query OK, 1 row affected (0.00 sec)</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> settest <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;V&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;sleep,eat&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- Query OK, 1 row affected (0.00 sec)</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> settest <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;Jack&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;sleep,eat1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- ERROR 1265 (01000): Data truncated for column 'hobby' at row 1</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> settest <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token string">&quot;Panam&quot;</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- Query OK, 1 row affected (0.00 sec)</span>

<span class="token operator">+</span><span class="token comment">-------+-----------+</span>
<span class="token operator">|</span> name  <span class="token operator">|</span> hobby     <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">-------+-----------+</span>
<span class="token operator">|</span> Judy  <span class="token operator">|</span> sleep     <span class="token operator">|</span>
<span class="token operator">|</span> V     <span class="token operator">|</span> sleep<span class="token punctuation">,</span>eat <span class="token operator">|</span>
<span class="token operator">|</span> Panam <span class="token operator">|</span> sleep<span class="token punctuation">,</span>eat <span class="token operator">|</span>    <span class="token comment">--  3 = 1 + 2</span>
<span class="token operator">+</span><span class="token comment">-------+-----------+</span>
</code></pre></div><h2 id="_4-语法要求"><a href="#_4-语法要求" class="header-anchor">#</a> 4. 语法要求</h2> <h3 id="不区分大小写"><a href="#不区分大小写" class="header-anchor">#</a> 不区分大小写</h3> <p>关键字和表名（函数名）不区分大小写。但是数据值是否区分大小写，与charset和其校对规则有关。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 显示mysql的校对规则</span>
<span class="token comment">-- _ci 大小写不敏感</span>
<span class="token comment">-- _cs 大小写敏感</span>
<span class="token keyword">show</span> variables <span class="token operator">like</span> <span class="token string">'coll%'</span><span class="token punctuation">;</span>
<span class="token operator">+</span><span class="token comment">----------------------+--------------------+</span>
<span class="token operator">|</span> Variable_name        <span class="token operator">|</span> <span class="token keyword">Value</span>              <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+--------------------+</span>
<span class="token operator">|</span> collation_connection <span class="token operator">|</span> utf8mb4_0900_ai_ci <span class="token operator">|</span>
<span class="token operator">|</span> collation_database   <span class="token operator">|</span> utf8mb4_0900_ai_ci <span class="token operator">|</span>
<span class="token operator">|</span> collation_server     <span class="token operator">|</span> utf8mb4_0900_ai_ci <span class="token operator">|</span>
<span class="token operator">+</span><span class="token comment">----------------------+--------------------+</span>
</code></pre></div><h3 id="命名规则"><a href="#命名规则" class="header-anchor">#</a> 命名规则</h3> <ol><li><p>尽量使用26个英文字母、数字0-9、下划线和美元符号，不要使用其他符号。</p></li> <li><p>建议不要使用mysql的关键字等来作为表名、字段名等。如果需要使用，用`（飘号）将表名/字段名引起来。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token identifier"><span class="token punctuation">`</span>create<span class="token punctuation">`</span></span><span class="token punctuation">(</span>id <span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- Query OK, 0 rows affected (0.06 sec)</span>
</code></pre></div></li> <li><p>数据库和表名、字段名等对象名中间不要包含空格。</p></li> <li><p>同一个mysql软件中，数据库不能同名；同一个库中，表不能重名；同一个表中，字段不能重名。</p></li></ol> <h3 id="书写规则"><a href="#书写规则" class="header-anchor">#</a> 书写规则</h3> <h4 id="标点符号"><a href="#标点符号" class="header-anchor">#</a> 标点符号</h4> <ol><li>必须成对</li> <li>必须英文状态下半角输入方式</li> <li>字符串和日期类型可以使用单引号''</li> <li>列的别名可以使用双引号&quot;&quot;，给表名取别名不要使用双引号。取别名时as可以省略</li> <li>如果列的别名没有包含空格，可以省略双引号，如果有空格双引号不能省略。</li></ol> <h4 id="注释"><a href="#注释" class="header-anchor">#</a> 注释</h4> <ol><li>单行注释：#注释内容</li> <li>单行注释：-- 注释内容    其中--后面的空格必须有</li> <li>多行注释：/* 注释内容 */</li></ol> <h2 id="_5-语言分类"><a href="#_5-语言分类" class="header-anchor">#</a> 5. 语言分类</h2> <h3 id="_5-1-ddl"><a href="#_5-1-ddl" class="header-anchor">#</a> 5.1 DDL</h3> <p>Data Definition Language，数据定义语言，定义库，表结构等，包括create,drop,alter等。</p> <h4 id="db"><a href="#db" class="header-anchor">#</a> DB</h4> <p>查看所有数据库</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
</code></pre></div><p>新建数据库：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">database</span> 数据库名<span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">database</span> 数据库名 <span class="token keyword">charset</span> 编码名<span class="token punctuation">;</span>
<span class="token comment">-- utf8, 在mysql中字符集名称不要使用utf-8</span>
</code></pre></div><p>指定使用某个数据库</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">use</span> 数据库名<span class="token punctuation">;</span>
</code></pre></div><p>删除数据库：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">database</span> 数据库名<span class="token punctuation">;</span>
</code></pre></div><h4 id="table"><a href="#table" class="header-anchor">#</a> Table</h4> <p>创建表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
  字段名 数据类型
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>展示当前库中所有的表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">tables</span><span class="token punctuation">;</span>
</code></pre></div><p>删除表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">table</span> 表名<span class="token punctuation">;</span>
</code></pre></div><h4 id="column"><a href="#column" class="header-anchor">#</a> Column</h4> <p>查看某个表结构</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">describe</span> 表名<span class="token punctuation">;</span>
<span class="token keyword">desc</span> 表名<span class="token punctuation">;</span>
</code></pre></div><p>增加表的字段</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 新增字段到最后</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> 新增字段名 新增字段数据类型<span class="token punctuation">;</span>

<span class="token comment">-- 新增字段到最前面</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> 新增字段名 新增字段数据类型 <span class="token keyword">first</span><span class="token punctuation">;</span>

<span class="token comment">-- 新增字段到指定字段的后面</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名称 <span class="token keyword">add</span> 新增字段名 新增字段数据类型 <span class="token keyword">after</span> 表中字段名<span class="token punctuation">;</span>
</code></pre></div><p>修改data type</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名称 <span class="token keyword">modify</span> 字段名 新数据类型<span class="token punctuation">;</span>
</code></pre></div><p>修改column_definition and data type</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 修改字段，然后移动到最后</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 change 旧字段名 新字段名 新字段数据类型<span class="token punctuation">;</span>

<span class="token comment">-- 修改字段，然后移动到最前</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 change 旧字段名 新字段名 新字段数据类型 <span class="token keyword">first</span><span class="token punctuation">;</span>

<span class="token comment">-- 修改字段，然后移动到指定字段后</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 change 旧字段名 新字段名 新字段数据类型 <span class="token keyword">after</span> 表中字段名<span class="token punctuation">;</span>

<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> 新字段名 新数据类型<span class="token punctuation">;</span>
</code></pre></div><p>删除column</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> 字段名<span class="token punctuation">;</span>
</code></pre></div><p>修改column的位置</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 移动到最前</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> 字段名 数据类型 <span class="token keyword">first</span><span class="token punctuation">;</span>

<span class="token comment">-- 移动到某字段后面</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> 字段名 数据类型 <span class="token keyword">after</span> 表中字段名<span class="token punctuation">;</span>
</code></pre></div><p>修改表名称</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 旧表名 <span class="token keyword">rename</span> 新表名<span class="token punctuation">;</span>
<span class="token keyword">rename</span> <span class="token keyword">table</span> 旧表名 <span class="token keyword">to</span> 新表名<span class="token punctuation">;</span>
</code></pre></div><h3 id="_5-2-dml"><a href="#_5-2-dml" class="header-anchor">#</a> 5.2 DML</h3> <p>Data Manipulation Language，数据操作语言，增删改查数据，包括insert, delete, update, select等.</p> <h4 id="添加数据"><a href="#添加数据" class="header-anchor">#</a> 添加数据</h4> <h5 id="全部赋值"><a href="#全部赋值" class="header-anchor">#</a> 全部赋值</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 要求值列表的顺序，个数，类型，要与表中字段对应。</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> 表名 <span class="token keyword">values</span> <span class="token punctuation">(</span>值列表<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="部分赋值"><a href="#部分赋值" class="header-anchor">#</a> 部分赋值</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 要求值列表的顺序，个数，类型，与部分字段列表对应。</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> 表名<span class="token punctuation">(</span>部分字段列表<span class="token punctuation">)</span> <span class="token keyword">values</span> <span class="token punctuation">(</span>部分字段对应的值列表<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment"># 下面这个用的比较多</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> 表名 <span class="token keyword">set</span> 字段名<span class="token operator">=</span>字段值<span class="token punctuation">,</span> 字段名<span class="token operator">=</span>字段值…<span class="token punctuation">;</span>
</code></pre></div><h5 id="批量添加"><a href="#批量添加" class="header-anchor">#</a> 批量添加</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 表名 <span class="token keyword">values</span> <span class="token punctuation">(</span>值列表<span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>值列表<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span>值列表<span class="token number">3</span><span class="token punctuation">)</span>…<span class="token punctuation">;</span>
</code></pre></div><h4 id="查询数据"><a href="#查询数据" class="header-anchor">#</a> 查询数据</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名称<span class="token punctuation">;</span> <span class="token comment">#查询整张表的所有数据</span>

<span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表名称<span class="token punctuation">;</span>  <span class="token comment">#查询部分列表</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名称 <span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> 字段列表 <span class="token keyword">from</span> 表名称 <span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>distinct对查询结果去重，放在select后面使用</p></blockquote> <h4 id="修改数据"><a href="#修改数据" class="header-anchor">#</a> 修改数据</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">update</span> 表名称 <span class="token keyword">set</span> 字段名<span class="token number">1</span> <span class="token operator">=</span> 新字段值<span class="token number">1</span><span class="token punctuation">,</span>字段名<span class="token number">2</span> <span class="token operator">=</span> 新字段值<span class="token number">2.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>如果没有加where条件，表示修改所有行，这个字段的值</p></blockquote> <h4 id="删除数据"><a href="#删除数据" class="header-anchor">#</a> 删除数据</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 如果没有where条件，则删除整张表的数据。</span>
<span class="token keyword">delete</span> <span class="token keyword">from</span> 表名 <span class="token punctuation">[</span><span class="token keyword">where</span> 条件<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">truncate</span> 表名<span class="token punctuation">;</span>
</code></pre></div><p>用delete删除整张表和用truncate删除整张表的数据的区别？</p> <p>（1）truncate速度快</p> <p>（2）truncate无法回滚</p> <p>truncate因为底层是把表drop掉，然后新建了一张空表。</p> <p>delete因为底层是一行一行删数据，效率较慢。</p> <h4 id="对表中字段起别名"><a href="#对表中字段起别名" class="header-anchor">#</a> 对表中字段起别名</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 起别名时，as都可以省略</span>
<span class="token keyword">select</span> 字段名<span class="token number">1</span> <span class="token punctuation">[</span><span class="token keyword">as</span><span class="token punctuation">]</span> 别名<span class="token punctuation">,</span> 字段名<span class="token number">2</span> <span class="token punctuation">[</span><span class="token keyword">as</span><span class="token punctuation">]</span> 别名 <span class="token keyword">from</span> 表名<span class="token punctuation">;</span> 

<span class="token comment">-- 如果字段别名中没有空格或关键字，那么可以省略quotes&quot;&quot;</span>
</code></pre></div><h3 id="_5-3-dql"><a href="#_5-3-dql" class="header-anchor">#</a> 5.3 DQL</h3> <p>Data Query Language，数据查询语言 select。</p> <h3 id="_5-4-dcl"><a href="#_5-4-dcl" class="header-anchor">#</a> 5.4 DCL</h3> <p>Data Control Language，数据控制语言，权限，事务等管理。</p> <p>登陆mysql：</p> <ol><li>mysql -u用户名 -p密码</li> <li>mysql -u用户名 -p</li></ol> <p>连接远程的mysql：mysql -h主机地址 -P 端口号 -u用户名  -p密码</p> <p>当前DBMS中，有哪些DB: show databases;</p> <p>打开数据库：</p> <p>添加一条数据：insert into 表名 values(字段的值);</p> <p>查看表中的数据：select * from 表名;</p> <p>数据库里没有char类型，只有字符串，quotes and double quotes都可以用。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">&quot;Rose&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> student <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">,</span><span class="token string">'Mary'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>查看当前mysql的编码方式：show variables like 'character%';</p> <h2 id="_6-导入与导出"><a href="#_6-导入与导出" class="header-anchor">#</a> 6. 导入与导出</h2> <h3 id="导出"><a href="#导出" class="header-anchor">#</a> 导出</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 先退出才能导出</span>
mysqldump <span class="token operator">-</span>u root <span class="token operator">-</span>p 数据库名 <span class="token operator">&gt;</span> 文件路径:<span class="token operator">/</span>文件名<span class="token punctuation">.</span><span class="token keyword">sql</span>
<span class="token comment">-- 输入mysql的密码就会自动导出</span>
</code></pre></div><h3 id="导入外部的数据"><a href="#导入外部的数据" class="header-anchor">#</a> 导入外部的数据</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 需要登陆</span>
<span class="token comment">-- 先选择一个想要导入的数据库，然后再导入</span>
source 存储数据的路径<span class="token punctuation">;</span>
</code></pre></div><h2 id="_7-运算符"><a href="#_7-运算符" class="header-anchor">#</a> 7. 运算符</h2> <h3 id="_7-1-算术运算符"><a href="#_7-1-算术运算符" class="header-anchor">#</a> 7.1 算术运算符</h3> <p>+：加
-：减
*：乘
/：除 可以保留小数部分
div：除  如果整数与整数相除只保留整数部分
%：求余数
mod：求余数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token number">1</span><span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">#0.5</span>
<span class="token keyword">select</span> <span class="token number">1</span> <span class="token operator">div</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">#0</span>
</code></pre></div><h3 id="_7-2-比较运算符"><a href="#_7-2-比较运算符" class="header-anchor">#</a> 7.2 比较运算符</h3> <p>：大于
&lt;：小于
=：等于  注意区别，Java中是==,mysql中是=
=：大于等于
&lt;=：小于等于
!=：不等于
&lt;&gt;：不等于
&lt;=&gt;：安全等于  用于判断null值的比较运算符
null值的判断，习惯上我们用is null 和is not null</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#查询薪资大于20000元的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token number">20000</span><span class="token punctuation">;</span>

<span class="token comment">#查询所有男员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> gender <span class="token operator">=</span> <span class="token string">'男'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> gender <span class="token operator">!=</span> <span class="token string">'女'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> gender <span class="token operator">&lt;&gt;</span> <span class="token string">'女'</span><span class="token punctuation">;</span>

<span class="token comment">#查询奖金比例commision_pct是null的员工</span>
<span class="token keyword">select</span>  <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> commission_pct <span class="token operator">&lt;=&gt;</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token keyword">select</span>  <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> commission_pct <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_7-3-逻辑运算符"><a href="#_7-3-逻辑运算符" class="header-anchor">#</a> 7.3 逻辑运算符</h3> <p>建议用单词，可读性来说</p> <p>逻辑与：&amp;&amp; 或 and
逻辑或：|| 或 or
逻辑非：! 或 not
逻辑异或： xor ^ 相同为false（1），不同为true（0）</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 注意逻辑运算符的位置</span>

<span class="token comment">#查询薪资大于20000元的女员工	</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token number">20000</span> <span class="token operator">&amp;&amp;</span> gender <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> salary <span class="token operator">&gt;</span> <span class="token number">20000</span> <span class="token operator">and</span> gender <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">;</span>

<span class="token comment">#查询男员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> <span class="token operator">not</span> gender <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> <span class="token operator">!</span><span class="token punctuation">(</span>gender <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">#查询薪资大于10000  异或 性别是男的，即它俩只能满足一个</span>
<span class="token comment">#即查询薪资大于10000的女的或薪资低于10000的男的</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> salary<span class="token operator">&gt;</span><span class="token number">10000</span> <span class="token operator">^</span> gender <span class="token operator">=</span><span class="token string">'男'</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> salary<span class="token operator">&gt;</span><span class="token number">10000</span> <span class="token operator">xor</span> gender <span class="token operator">=</span><span class="token string">'男'</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_8-范围"><a href="#_8-范围" class="header-anchor">#</a> 8. 范围</h2> <h3 id="_8-1-区间范围"><a href="#_8-1-区间范围" class="header-anchor">#</a> 8.1 区间范围</h3> <p>​	在[a,b]之间，between a and b
​	不在[a,b]之间，not between a and b</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#查询薪资在[15000,20000]之间的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> salary <span class="token operator">between</span> <span class="token number">15000</span> <span class="token operator">and</span> <span class="token number">20000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> salary <span class="token operator">&gt;=</span> <span class="token number">15000</span> <span class="token operator">and</span> salary <span class="token operator">&lt;=</span><span class="token number">20000</span><span class="token punctuation">;</span>

<span class="token comment">#查询薪资不在[15000,20000]之间的员工</span>
<span class="token comment">--  not的位置两个都可。</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> salary <span class="token operator">not</span> <span class="token operator">between</span> <span class="token number">15000</span> <span class="token operator">and</span> <span class="token number">20000</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> <span class="token operator">not</span> salary <span class="token operator">between</span> <span class="token number">15000</span> <span class="token operator">and</span> <span class="token number">20000</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_8-2-集合范围"><a href="#_8-2-集合范围" class="header-anchor">#</a> 8.2 集合范围</h3> <p>​	in(...)
​	not in(...)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#查询薪资在9000,10000,12000</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> salary <span class="token operator">in</span><span class="token punctuation">(</span><span class="token number">9000</span><span class="token punctuation">,</span><span class="token number">10000</span><span class="token punctuation">,</span><span class="token number">12000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> salary <span class="token operator">=</span><span class="token number">9000</span> <span class="token operator">||</span> salary <span class="token operator">=</span><span class="token number">10000</span> <span class="token operator">||</span> salary <span class="token operator">=</span><span class="token number">12000</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_8-3-模糊查询和正则匹配"><a href="#_8-3-模糊查询和正则匹配" class="header-anchor">#</a> 8.3 模糊查询和正则匹配</h3> <p>只针对字符串类型，日期类型</p> <p>%代表任意多个字符</p> <p>x代表确定的字符</p> <p>_表示确定的1个字符</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#查询，名字ename中包含“冰”这个字的员工</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'%冰%'</span><span class="token punctuation">;</span>

<span class="token comment">#查询，名字ename是张xx，三个字</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'张__'</span><span class="token punctuation">;</span>

<span class="token comment">#查询，名字ename是第二个字是'冰'</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> t_employee <span class="token keyword">where</span> ename <span class="token operator">like</span> <span class="token string">'_冰%'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_8-4-位运算符"><a href="#_8-4-位运算符" class="header-anchor">#</a> 8.4 位运算符</h3> <p>（很少使用）</p> <p>左移：&lt;&lt;
右移：&gt;&gt;
按位与：&amp;
按位或：|
按位异或：^
按位取反：~</p> <h3 id="_8-5-特殊的null值处理"><a href="#_8-5-特殊的null值处理" class="header-anchor">#</a> 8.5 特殊的null值处理</h3> <p>xx is null
xx is not null
xx &lt;=&gt; null</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 筛选出是null值的</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 字段名 <span class="token operator">&lt;=&gt;</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 字段名 <span class="token operator">is</span> <span class="token boolean">null</span><span class="token punctuation">;</span>

<span class="token comment">-- 筛选出不是null值的</span>
<span class="token comment">-- 判断不为null的时候，需要把not放在要判断的字段名前面。</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> <span class="token operator">not</span> 字段名 <span class="token operator">&lt;=&gt;</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 表名 <span class="token keyword">where</span> 字段名 <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_9-约束与索引"><a href="#_9-约束与索引" class="header-anchor">#</a> 9. 约束与索引</h2> <h3 id="_9-1-约束与索引的概念"><a href="#_9-1-约束与索引的概念" class="header-anchor">#</a> 9.1 约束与索引的概念</h3> <p>约束是用来对数据业务规则和数据完整性进行实施、维护。约束的作用范围仅限在当前数据库，约束可以被当做<strong>数据库对象</strong>来处理，它们具有名称和关联模式，是逻辑约束，不会因为设置约束而额外占用空间。</p> <p>1、数据完整性（Data Integrity）是指数据的精确性（Accuracy）和可靠性（Reliability）。它是应防止数据库中存在不符合语义规定的数据和防止因错误信息的输入输出造成无效操作或错误信息而提出的。</p> <p>数据的完整性要从以下四个方面考虑：</p> <ul><li>实体完整性（Entity Integrity）：例如，同一个表中，不能存在两条完全相同无法区分的记录</li> <li>域完整性（Domain Integrity）：例如：年龄范围0-120，性别范围“男/女”</li> <li>引用完整性（Referential Integrity）：例如：员工所在部门，在部门表中要能找到这个部门</li> <li>用户自定义完整性（User-defined Integrity）：例如：用户名唯一、密码不能为空等，本部门经理的工资不得高于本部门职工的平均工资的5倍。</li></ul> <p>2、根据约束的特点，分为几种：</p> <ul><li>键约束：主键约束（用来解决实体完整性）、外键约束（用来解决引用完整性）、唯一键约束（用来解决用户自定义完整性）。</li> <li>Not NULL约束：非空约束。</li> <li>Check约束：检查约束(5.7版本不支持)</li> <li>Default约束：默认值约束</li> <li>自增约束：（自动增长约束，一般都是用在主键约束上）。</li></ul> <p>3、约束（CONSTRAINTS）与索引（INDEX）</p> <p><strong>索引</strong>是一个单独、物理的存储在数据页上的数据库结构，它是表中<strong>一列或若干列值的集合</strong>和相应的指向表中数据值的物理标识数据页的<strong>逻辑指针清单</strong>（类似于新华字典的目录索引页）。索引的存在会增加数据库的存储空间，也会使插入、修改数据的时间开销变多(因为插入和修改数据时，索引也要随之变动），但是可以大大提高查询速度。因此应该在键列、或其他经常要查询、排序、按范围查找的列上建立索引，而对于在查询中很少使用和参考的列、修改非常频繁的列，值很少的列（例如性别只有男和女）等列上不应该创建索引。</p> <blockquote><p>Mysql会在主键、唯一键、外键列上自动创建索引，其他列需要建立索引的话，需要手动创建。</p> <p>其中主键删除，对应的索引也会删除</p> <p>删除唯一键的方式是通过删除对应的索引来实现的</p> <p>删除外键，外键列上的索引还在，如果需要删除，需要单独删除索引</p></blockquote> <h3 id="_9-2-ddl-v2-0"><a href="#_9-2-ddl-v2-0" class="header-anchor">#</a> 9.2 DDL(v2.0)</h3> <h4 id="查看某个表的约束"><a href="#查看某个表的约束" class="header-anchor">#</a> 查看某个表的约束</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 没有where条件的话，会查找所有表的约束</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> information_schema<span class="token punctuation">.</span>table_constraints <span class="token punctuation">[</span><span class="token keyword">WHERE</span> table_name <span class="token operator">=</span> <span class="token string">'表名称'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">-- 或</span>

<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">;</span>
</code></pre></div><h4 id="查看某个表的索引"><a href="#查看某个表的索引" class="header-anchor">#</a> 查看某个表的索引</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">INDEX</span> <span class="token keyword">FROM</span> 表名称<span class="token punctuation">;</span>
</code></pre></div><h4 id="主键约束-primary-key"><a href="#主键约束-primary-key" class="header-anchor">#</a> 主键约束 primary key</h4> <p>主键分为单列主键和复合主键：</p> <p>特点</p> <ol><li>唯一、非空、不能重复</li> <li>创建主键会自动创建对应的索引，删除主键时会自动删除对应的索引，但是非空约束没有被删除。</li></ol> <h5 id="建表时-指定主键约束"><a href="#建表时-指定主键约束" class="header-anchor">#</a> 建表时 指定主键约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 直接写在字段后面</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stu<span class="token punctuation">(</span>
id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
sname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 写完字段，再设定主键</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stu<span class="token punctuation">(</span>
id <span class="token keyword">INT</span><span class="token punctuation">,</span>
sname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="建表后-指定主键"><a href="#建表后-指定主键" class="header-anchor">#</a> 建表后 指定主键</h5> <p>如果想要设置为主键的字段已经有null值，则无法设置成功，需要处理完null值后才能设置。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>主键字段列表<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="删除主键"><a href="#删除主键" class="header-anchor">#</a> 删除主键</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">drop</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="非空约束-not-null"><a href="#非空约束-not-null" class="header-anchor">#</a> 非空约束 not null</h4> <p>规定某个字段不能为空</p> <h5 id="建表时-指定非空"><a href="#建表时-指定非空" class="header-anchor">#</a> 建表时 指定非空</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 只有这一种方式</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stu<span class="token punctuation">(</span>
id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
sname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="建表后-指定非空"><a href="#建表后-指定非空" class="header-anchor">#</a> 建表后 指定非空</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 字段名 数据类型 <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token punctuation">[</span><span class="token keyword">default</span> 默认值<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">#如果该字段原来设置了默认值约束，要跟着一起再写一遍，否则默认值约束会丢失</span>
</code></pre></div><h5 id="取消非空约束"><a href="#取消非空约束" class="header-anchor">#</a> 取消非空约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 字段名 数据类型 <span class="token punctuation">[</span><span class="token keyword">default</span> 默认值<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">#如果该字段原来设置了默认值约束，要跟着一起再写一遍，否则默认值约束会丢失</span>
</code></pre></div><h4 id="唯一约束-unique-key"><a href="#唯一约束-unique-key" class="header-anchor">#</a> 唯一约束 unique key</h4> <p>特点：</p> <ol><li>保证此值在整张表中是唯一的。</li> <li>创建完唯一约束，会在表内创建一个索引。</li> <li>删除索引，就相当于删除了唯一约束。</li> <li>唯一键约束列允许为null。</li> <li>同一个表可以有多个唯一约束。</li> <li>唯一约束可以是某一个列的值唯一，也可以多个列组合值的唯一。</li></ol> <h5 id="建表时-指定唯一约束"><a href="#建表时-指定唯一约束" class="header-anchor">#</a> 建表时 指定唯一约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 直接写在字段后面</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stu<span class="token punctuation">(</span>
id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
sname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 写完字段后再指定</span>
<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stu<span class="token punctuation">(</span>
id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
sname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span><span class="token punctuation">,</span>
email <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token comment">-- 下面这行不是sname和email分别是唯一约束，而是sname+email是唯一约束</span>
<span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>sname<span class="token punctuation">,</span>email<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="建表后增加唯一约束"><a href="#建表后增加唯一约束" class="header-anchor">#</a> 建表后增加唯一约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">add</span> <span class="token punctuation">[</span><span class="token keyword">constraint</span> 约束名<span class="token punctuation">]</span> <span class="token keyword">unique</span> <span class="token punctuation">[</span><span class="token keyword">key</span><span class="token punctuation">]</span> <span class="token punctuation">(</span>字段名列表<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">#如果没有指定约束名，(字段名列表)中只有一个字段的，默认是该字段名，如果是多个字段的默认是字段名列表的第1个字段名。也可以通过show index from 表名;来查看</span>
</code></pre></div><h5 id="删除唯一键约束"><a href="#删除唯一键约束" class="header-anchor">#</a> 删除唯一键约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">INDEX</span> 唯一约束字段名<span class="token punctuation">;</span>
</code></pre></div><h4 id="默认值约束-default"><a href="#默认值约束-default" class="header-anchor">#</a> 默认值约束 default</h4> <ol><li>如果没有给某个字段赋值，则会采用默认值。</li> <li>默认值约束修饰的字段可以接受null值。</li> <li></li></ol> <h5 id="建表时-指定默认约束"><a href="#建表时-指定默认约束" class="header-anchor">#</a> 建表时 指定默认约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stu<span class="token punctuation">(</span>
id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
sname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
buybook <span class="token keyword">enum</span><span class="token punctuation">(</span><span class="token string">'TRUE'</span><span class="token punctuation">,</span><span class="token string">'FALSE'</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'TRUE'</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
	字段名<span class="token number">1</span> 数据类型  <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">,</span>
	字段名<span class="token number">2</span> 数据类型 【<span class="token keyword">unique</span> <span class="token keyword">key</span>】 【<span class="token operator">not</span> <span class="token boolean">null</span>】 【<span class="token keyword">default</span> 默认值】<span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
    <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>从表字段<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表名<span class="token punctuation">(</span>主表字段<span class="token punctuation">)</span> 【<span class="token keyword">on</span> <span class="token keyword">update</span> 外键约束等级】【<span class="token keyword">on</span> <span class="token keyword">delete</span> 外键约束等级【
    <span class="token comment">#外键只能在所有字段列表后面单独指定</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> 【数据名<span class="token punctuation">.</span>】表名<span class="token punctuation">(</span>
    字段名<span class="token number">1</span> 数据类型 【<span class="token operator">not</span> <span class="token boolean">null</span>】 【<span class="token keyword">default</span> 默认值】<span class="token punctuation">,</span>
    字段名<span class="token number">2</span> 数据类型 【<span class="token operator">not</span> <span class="token boolean">null</span>】 【<span class="token keyword">default</span> 默认值】<span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>复合主键字段列表<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">#如果是复合主键，那么就需要在所有字段列表后面使用这种形式指定，不能在字段后面直接加primary key</span>
    <span class="token keyword">unique</span> <span class="token keyword">key</span><span class="token punctuation">(</span>复合唯一字段列表<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">#如果是复合唯一键，那么就需要在所有字段列表后面使用这种形式指定，不能在字段后面直接加unique key</span>
    <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>从表字段<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表名<span class="token punctuation">(</span>主表字段<span class="token punctuation">)</span> 【<span class="token keyword">on</span> <span class="token keyword">update</span> 外键约束等级】【<span class="token keyword">on</span> <span class="token keyword">delete</span> 外键约束等级【
    <span class="token comment">#外键只能在所有字段列表后面单独指定</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="建表后-指定默认值约束"><a href="#建表后-指定默认值约束" class="header-anchor">#</a> 建表后 指定默认值约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 字段名 数据类型 <span class="token keyword">DEFAULT</span> 默认值<span class="token punctuation">;</span>

<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stu <span class="token keyword">MODIFY</span> buybook <span class="token keyword">enum</span><span class="token punctuation">(</span><span class="token string">'TRUE'</span><span class="token punctuation">,</span><span class="token string">'FALSE'</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'TRUE'</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="取消默认值约束"><a href="#取消默认值约束" class="header-anchor">#</a> 取消默认值约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">MODIFY</span> 字段名 数据类型<span class="token punctuation">;</span>
<span class="token comment">-- 举例：</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> stu <span class="token keyword">MODIFY</span> buybook <span class="token keyword">enum</span><span class="token punctuation">(</span><span class="token string">'TRUE'</span><span class="token punctuation">,</span><span class="token string">'FALSE'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="检查约束-check"><a href="#检查约束-check" class="header-anchor">#</a> 检查约束：check</h4> <p>检查约束，mysql5.7不支持</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">table</span> stu<span class="token punctuation">(</span>
	sid <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
	sname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	gender <span class="token keyword">char</span> <span class="token keyword">check</span> <span class="token punctuation">(</span><span class="token string">'男'</span><span class="token operator">or</span><span class="token string">'女'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> stu <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'张三'</span><span class="token punctuation">,</span><span class="token string">'男'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">insert</span> <span class="token keyword">into</span> stu <span class="token keyword">values</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'李四'</span><span class="token punctuation">,</span><span class="token string">'妖'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

使用枚举类型解决如上问题：
<span class="token keyword">create</span> <span class="token keyword">table</span> stu<span class="token punctuation">(</span>
	sid <span class="token keyword">int</span> <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">,</span>
	sname <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	gender <span class="token keyword">enum</span> <span class="token punctuation">(</span><span class="token string">'男'</span><span class="token punctuation">,</span><span class="token string">'女'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="自增约束-auto-increment"><a href="#自增约束-auto-increment" class="header-anchor">#</a> 自增约束 auto_increment</h4> <ul><li>一个表最多只能有一个自增长列</li> <li>自增长列必须是键列（主键列，唯一键列，外键列），并且要求非空。</li> <li>自增列必须是整数类型</li> <li>InnoDB表的自动增长列可以手动插入，但是插入的值如果是空或者0，则实际插入的将是自动增长后的值。</li></ul> <h5 id="建表时-指定自增约束"><a href="#建表时-指定自增约束" class="header-anchor">#</a> 建表时 指定自增约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stu<span class="token punctuation">(</span>
id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 或</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stu<span class="token punctuation">(</span>
id <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
age <span class="token keyword">INT</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
name <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="建表后-指定自增约束"><a href="#建表后-指定自增约束" class="header-anchor">#</a> 建表后 指定自增约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> 自增字段名 数据类型 <span class="token keyword">auto_increment</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="删除自增约束"><a href="#删除自增约束" class="header-anchor">#</a> 删除自增约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 表名 <span class="token keyword">modify</span> 自增字段名 数据类型<span class="token punctuation">;</span>
</code></pre></div><h4 id="外键约束-foreign-key"><a href="#外键约束-foreign-key" class="header-anchor">#</a> 外键约束 foreign key</h4> <p>外键约束是用来实现数据库表的参照完整性的。外键约束可以使两张表紧密的结合起来，特别是针对修改或者删除的级联操作时，会保证数据的完整性。</p> <p>外键是指表中某个字段的值依赖于另一张表中某个字段的值，而<strong>被依赖的字段必须具有主键约束或者唯一约束</strong>。被依赖的表我们通常称之为父表或者主表，设置外键约束的表称为子表或者从表。</p> <h5 id="外键特点"><a href="#外键特点" class="header-anchor">#</a> 外键特点</h5> <ul><li><p>外键约束是保证一个或两个表之间的参照完整性,外键是构建于一个表的两个字段或是两个表的两个字段之间的参照关系。</p></li> <li><p>在创建外键约束时，如果不给外键约束名称，默认名不是列名，而是自动产生一个外键名（例如 student_ibfk_1;），也可以指定外键约束名。</p></li> <li><p>当创建外键约束时，系统默认会在所在的列上建立对应的普通索引。但是索引名是列名，不是外键的约束名。</p></li> <li><p>删除外键时，关于外键列上的普通索引需要单独删除。</p></li></ul> <h5 id="要求"><a href="#要求" class="header-anchor">#</a> 要求</h5> <ul><li><p>在从表上建立外键，而且主表要先存在。</p></li> <li><p>一个表可以建立多个外键约束</p></li> <li><p>从表的外键列，在主表中引用的只能是键列（主键，唯一键，外键），推荐引用主表的主键。</p></li> <li><p>从表的外键列与主表被参照的列名字可以不相同，但是数据类型必须一样</p></li></ul> <h5 id="约束关系-约束是针对双方的"><a href="#约束关系-约束是针对双方的" class="header-anchor">#</a> 约束关系：约束是针对双方的</h5> <ul><li><p>添加了外键约束后，主表的修改和删除数据受约束</p></li> <li><p>添加了外键约束后，从表的添加和修改数据受约束</p></li> <li><p>在从表上建立外键，要求主表必须存在</p></li> <li><p>删除主表时，要求从表先删除，或将从表中外键引用该主表的关系先删除</p></li></ul> <h5 id="_5个约束等级"><a href="#_5个约束等级" class="header-anchor">#</a> 5个约束等级</h5> <ul><li><p>Cascade方式（级联）：在父表上update/delete记录时，同步update/delete掉子表的匹配记录。</p></li> <li><p>Set null方式：在父表上update/delete记录时，将子表上匹配记录的列设为null，但是要注意子表的外键列不能为not null 。</p></li> <li><p>No action方式：如果子表中有匹配的记录，则不允许对父表对应候选键进行update/delete操作。</p></li> <li><p>Restrict方式：同no action，都是立即检查外键约束。（默认为此等级）</p></li> <li><p>Set default方式（在可视化工具SQLyog中可能显示空白）：父表有变更时,子表将外键列设置成一个默认的值，但Innodb不能识别。</p></li></ul> <p>默认：如果没有指定等级，就相当于Restrict方式。</p> <h5 id="建表时-指定外键约束"><a href="#建表时-指定外键约束" class="header-anchor">#</a> 建表时 指定外键约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> classroom<span class="token punctuation">(</span>
    cid <span class="token keyword">int</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
    cname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> stu<span class="token punctuation">(</span>
sid <span class="token keyword">INT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
sname <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
room <span class="token keyword">INT</span><span class="token punctuation">,</span>
<span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>room<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> classroom<span class="token punctuation">(</span>cid<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> 从表名<span class="token punctuation">(</span>
	字段名<span class="token number">1</span> 数据类型  <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">,</span>
	字段名<span class="token number">2</span> 数据类型 <span class="token punctuation">[</span><span class="token keyword">unique</span> <span class="token keyword">key</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token keyword">constraint</span> 外键约束名<span class="token punctuation">]</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>从表字段<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表名<span class="token punctuation">(</span>主表字段<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">on</span> <span class="token keyword">update</span> 外键约束等级<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">on</span> <span class="token keyword">delete</span> 外键约束等级<span class="token punctuation">]</span>
    <span class="token comment">#外键只能在所有字段列表后面单独指定</span>
    <span class="token comment">#如果要自己命名外键约束名，建议命名规则为【主表名_从表名_关联字段名_fk】</span>
  	<span class="token comment">-- fk为foreign key的缩写</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">create</span> <span class="token keyword">table</span> 表名<span class="token punctuation">(</span>
    字段名<span class="token number">1</span> 数据类型<span class="token punctuation">,</span>
    字段名<span class="token number">2</span> 数据类型<span class="token punctuation">,</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">,</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span><span class="token punctuation">(</span>复合主键字段列表<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">#如果是复合主键，那么就需要在所有字段列表后面使用这种形式指定，不能在字段后面直接加primary key</span>
    <span class="token keyword">unique</span> <span class="token keyword">key</span><span class="token punctuation">(</span>复合唯一字段列表<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">#如果是复合唯一键，那么就需要在所有字段列表后面使用这种形式指定，不能在字段后面直接加unique key</span>
    <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>从表字段<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表名<span class="token punctuation">(</span>主表字段<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">on</span> <span class="token keyword">update</span> 外键约束等级<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">on</span> <span class="token keyword">delete</span> 外键约束等级<span class="token punctuation">]</span>
    <span class="token comment">#外键只能在所有字段列表后面单独指定</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="建表后-指定外键约束"><a href="#建表后-指定外键约束" class="header-anchor">#</a> 建表后 指定外键约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> 从表名称 <span class="token keyword">add</span> <span class="token punctuation">[</span><span class="token keyword">constraint</span> 外键约束名<span class="token punctuation">]</span> <span class="token keyword">foreign</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>从表字段名<span class="token punctuation">)</span> <span class="token keyword">references</span> 主表名<span class="token punctuation">(</span>主表被参照字段名<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">on</span> <span class="token keyword">update</span> xx<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">on</span> <span class="token keyword">delete</span> xx<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="删除外键约束"><a href="#删除外键约束" class="header-anchor">#</a> 删除外键约束</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 注意删除后，用 【DESC 表名】还是能看到外建约束的存在，但实际上已经</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名称 <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> 外键约束名<span class="token punctuation">;</span>
<span class="token comment">#查看约束名 SELECT * FROM information_schema.table_constraints WHERE table_name = '表名称';</span>
<span class="token comment">#删除外键约束不会删除对应的索引，如果需要删除索引，需要用ALTER TABLE 表名称 DROP INDEX 索引名;</span>
<span class="token comment">#查看索引名 show index from 表名称;</span>
</code></pre></div><h3 id="_9-3-dml-v2-0"><a href="#_9-3-dml-v2-0" class="header-anchor">#</a> 9.3 DML(v2.0)</h3> <p>1、如果某列有自增约束，怎么添加该字段的值</p> <p>添加数据时，对于自增列</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 【数据库名<span class="token punctuation">.</span><span class="token punctuation">]</span>表名称 <span class="token keyword">values</span><span class="token punctuation">(</span>值列表<span class="token punctuation">)</span>；<span class="token comment">#在值列表中，对应自增列可以赋值为null和0</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> 【数据库名<span class="token punctuation">.</span><span class="token punctuation">]</span>表名称<span class="token punctuation">(</span>部分字段列表<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span>值列表<span class="token punctuation">)</span>；<span class="token comment">#自增列在(部分字段列表)中不写就可以</span>
</code></pre></div><p>2、如果某列有默认值约束，怎么添加、修改该字段的值</p> <p>添加数据时，对于有默认值列</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">insert</span> <span class="token keyword">into</span> 【数据库名<span class="token punctuation">.</span><span class="token punctuation">]</span>表名称 <span class="token keyword">values</span><span class="token punctuation">(</span>值列表<span class="token punctuation">)</span>；<span class="token comment">#在值列表中，对应默认值列，如果想用默认值，用default</span>

<span class="token keyword">insert</span> <span class="token keyword">into</span> 【数据库名<span class="token punctuation">.</span><span class="token punctuation">]</span>表名称<span class="token punctuation">(</span>部分字段列表<span class="token punctuation">)</span> <span class="token keyword">values</span><span class="token punctuation">(</span>值列表<span class="token punctuation">)</span>；<span class="token comment">#对应默认值列，如果想用默认值，在(部分字段列表)中不写就可以</span>
</code></pre></div><p>修改数据</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">update</span> 【数据库名<span class="token punctuation">.</span><span class="token punctuation">]</span>表名称 <span class="token keyword">set</span> 字段名<span class="token number">1</span> <span class="token operator">=</span> 值<span class="token number">1</span><span class="token punctuation">,</span> 字段名<span class="token number">2</span> <span class="token operator">=</span> 值<span class="token number">2</span> 。。。 【<span class="token keyword">where</span> 条件】<span class="token punctuation">;</span> <span class="token comment">#对应默认值列，如果想用默认值，写字段名 = default就可以</span>
</code></pre></div><h2 id="_10-函数-function"><a href="#_10-函数-function" class="header-anchor">#</a> 10. 函数 function</h2> <p>单行函数 和 多行函数</p> <h3 id="_10-1-单行函数-single-line-function"><a href="#_10-1-单行函数-single-line-function" class="header-anchor">#</a> 10.1 单行函数 Single line function</h3> <blockquote><p>https://www.fatalerrors.org/a/detailed-explanation-of-mysql-single-line-function.html</p></blockquote> <ul><li><strong>只对一行进行变换，每行返回一个结果</strong></li> <li>可以嵌套</li> <li>参数可以是一字段或一个表达式或一个值</li></ul> <h4 id="字符串函数"><a href="#字符串函数" class="header-anchor">#</a> 字符串函数</h4> <h5 id="concat-s1-s2-sn"><a href="#concat-s1-s2-sn" class="header-anchor">#</a> CONCAT(S1,S2,......,Sn)</h5> <p>连接S1,S2,......,Sn为一个字符串</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> concat<span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">,</span><span class="token string">'world'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> dual<span class="token punctuation">;</span>
<span class="token comment">-- helloworld</span>
</code></pre></div><h5 id="concat-ws-s-s1-s2-sn"><a href="#concat-ws-s-s1-s2-sn" class="header-anchor">#</a> CONCAT_WS(s, S1,S2,......,Sn)</h5> <p>同CONCAT(s1,s2,...)函数，但是每个字符串之间要加上s</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> concat_ws<span class="token punctuation">(</span><span class="token string">'666'</span><span class="token punctuation">,</span><span class="token string">'hello'</span><span class="token punctuation">,</span><span class="token string">'world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- hello666world</span>
</code></pre></div><h5 id="char-length-s"><a href="#char-length-s" class="header-anchor">#</a> CHAR_LENGTH(s)</h5> <p>返回字符串s的字符数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span> char_length<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
<span class="token comment">-- 孙红雷,3</span>
</code></pre></div><h5 id="length-s"><a href="#length-s" class="header-anchor">#</a> LENGTH(s)</h5> <p>返回字符串s的字节数，和字符集有关.</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span> length<span class="token punctuation">(</span>ename<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
<span class="token comment">-- 孙红雷,9</span>
</code></pre></div><h5 id="upper-s-或-ucase-s"><a href="#upper-s-或-ucase-s" class="header-anchor">#</a> UPPER(s) 或 UCASE(s)</h5> <p>将字符串s的所有字母转成大写字母</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> email<span class="token punctuation">,</span> upper<span class="token punctuation">(</span>email<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
<span class="token comment">-- shl@atguigu.com,SHL@ATGUIGU.COM</span>
</code></pre></div><h5 id="left-s-n"><a href="#left-s-n" class="header-anchor">#</a> LEFT(s,n)</h5> <p>返回字符串s最左边的n个字符</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span> <span class="token keyword">left</span><span class="token punctuation">(</span>ename<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
<span class="token comment">-- 孙红雷,孙红</span>
</code></pre></div><h5 id="trim-both-s1-from-s"><a href="#trim-both-s1-from-s" class="header-anchor">#</a> TRIM( BOTH s1 FROM s)</h5> <p>去掉字符串s 开始 与 结尾的s1</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> trim<span class="token punctuation">(</span>BOTH <span class="token string">'%'</span> <span class="token keyword">FROM</span> <span class="token string">'%%%%hello%%%%world%%%'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- hello%%%%world</span>
</code></pre></div><h5 id="trim-leading-s1-from-s"><a href="#trim-leading-s1-from-s" class="header-anchor">#</a> TRIM( LEADING s1 FROM s)</h5> <p>去掉字符串s开始处的s1</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> trim<span class="token punctuation">(</span>LEADING <span class="token string">'%'</span> <span class="token keyword">FROM</span> <span class="token string">'%%%%hello%%%%world%%%'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- hello%%%%world%%%</span>
</code></pre></div><h5 id="trim-trailing-s1-from-s"><a href="#trim-trailing-s1-from-s" class="header-anchor">#</a> TRIM( TRAILING s1 FROM s)</h5> <p>去掉字符串s结尾处的s1</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> trim<span class="token punctuation">(</span>TRAILING <span class="token string">'%'</span> <span class="token keyword">FROM</span> <span class="token string">'%%%%hello%%%%world%%%'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- %%%%hello%%%%world</span>
</code></pre></div><h5 id="substring-s-index-len"><a href="#substring-s-index-len" class="header-anchor">#</a> SUBSTRING(s,index,len)</h5> <p>返回从字符串s的index位置其len个字符</p> <p>注意：mysql的index，即下标，是从1开始的。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> email<span class="token punctuation">,</span> substring<span class="token punctuation">(</span>email<span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
<span class="token comment">-- shl@atguigu.com, hl@</span>
</code></pre></div><table><thead><tr><th>函数</th> <th>用法</th></tr></thead> <tbody><tr><td>INSERT(str, index , len, instr)</td> <td>将字符串str从第index位置开始，len个字符长的子串替换为字符串instr</td></tr> <tr><td>LOWER(s)  或LCASE(s)</td> <td>将字符串s的所有字母转成小写字母</td></tr> <tr><td>RIGHT(s,n)</td> <td>返回字符串s最右边的n个字符</td></tr> <tr><td>LPAD(str, len, pad)</td> <td>用字符串pad对str最左边进行填充，直到str的长度为len个字符</td></tr> <tr><td>RPAD(str ,len, pad)</td> <td>用字符串pad对str最右边进行填充，直到str的长度为len个字符</td></tr> <tr><td>LTRIM(s)</td> <td>去掉字符串s左侧的空格</td></tr> <tr><td>RTRIM(s)</td> <td>去掉字符串s右侧的空格</td></tr> <tr><td>TRIM(s)</td> <td>去掉字符串s开始与结尾的空格</td></tr> <tr><td>REPEAT(str, n)</td> <td>返回str重复n次的结果</td></tr> <tr><td>REPLACE（str, a, b）</td> <td>用字符串b替换字符串str中所有出现的字符串a</td></tr> <tr><td>STRCMP(s1,s2)</td> <td>比较字符串s1,s2</td></tr></tbody></table> <h4 id="数值函数-数学函数"><a href="#数值函数-数学函数" class="header-anchor">#</a> 数值函数/数学函数</h4> <h5 id="abs-x"><a href="#abs-x" class="header-anchor">#</a> ABS(x)</h5> <p>返回x的绝对值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> abs<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>abs<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">--         1       1 </span>
</code></pre></div><h5 id="ceil-x"><a href="#ceil-x" class="header-anchor">#</a> CEIL(x)</h5> <p>向上取整，返回大于x的最小整数值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> ceil<span class="token punctuation">(</span><span class="token number">2.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				 <span class="token comment">--  3</span>
</code></pre></div><h5 id="floor-x"><a href="#floor-x" class="header-anchor">#</a> FLOOR(x)</h5> <p>向下取整，返回小于x的最大整数值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> floor<span class="token punctuation">(</span><span class="token number">2.3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			  		<span class="token comment">-- 2</span>
</code></pre></div><h5 id="round-x-y"><a href="#round-x-y" class="header-anchor">#</a> ROUND(x,y)</h5> <p>返回参数x的四舍五入的有y位的小数的值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">5.6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token comment">-- 6</span>
									  		
<span class="token keyword">SELECT</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token number">5.456</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					  	<span class="token comment">-- 5.46</span>
</code></pre></div><h5 id="truncate-x-y"><a href="#truncate-x-y" class="header-anchor">#</a> TRUNCATE(x,y)</h5> <p>返回数字x截断为y位小数的结果，不会四舍五入</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">truncate</span><span class="token punctuation">(</span><span class="token number">5.456</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
							<span class="token comment">-- 5.45</span>
</code></pre></div><table><thead><tr><th>函数</th> <th>用法</th></tr></thead> <tbody><tr><td>MOD(x,y)</td> <td>返回x/y的模</td></tr> <tr><td>RAND()</td> <td>返回0~1的随机值</td></tr> <tr><td>SQRT(x)</td> <td>返回x的平方根</td></tr> <tr><td>POW(x,y)</td> <td>返回x的y次方</td></tr></tbody></table> <h4 id="日期函数"><a href="#日期函数" class="header-anchor">#</a> 日期函数</h4> <h5 id="now-sysdate-current-timestamp-localtime-localtimestamp"><a href="#now-sysdate-current-timestamp-localtime-localtimestamp" class="header-anchor">#</a> NOW() / SYSDATE() / CURRENT_TIMESTAMP() / LOCALTIME() / LOCALTIMESTAMP()</h5> <p>返回当前系统日期时间</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sysdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>localtime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>localtimestamp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sleep<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>sysdate<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>localtime<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>localtimestamp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
2021-11-22 12:00:51,
2021-11-22 12:00:51,
2021-11-22 12:00:51,
2021-11-22 12:00:51,
0,
2021-11-22 12:00:51,	now() 
2021-11-22 12:00:56,	sysdate() 返回的是函数被执行时的时间
2021-11-22 12:00:51,	localtime()
2021-11-22 12:00:51		localtimestamp()  
*/</span>
</code></pre></div><h5 id="year-date-month-date-day-date-hour-time-minute-time-second-time"><a href="#year-date-month-date-day-date-hour-time-minute-time-second-time" class="header-anchor">#</a> YEAR(date) / MONTH(date) / DAY(date) / HOUR(time) / MINUTE(time) / SECOND(time)</h5> <p>返回具体的时间值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">year</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">month</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">day</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       <span class="token keyword">hour</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">minute</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">second</span><span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       
       <span class="token comment">-- 2021,11,22,11,58,3</span>
</code></pre></div><h5 id="dayname-date"><a href="#dayname-date" class="header-anchor">#</a> DAYNAME(date)</h5> <p>返回星期几：MONDAY,TUESDAY.....SUNDAY</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> dayname<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- Monday</span>
</code></pre></div><h5 id="date-add-datetime-interval-expr-type"><a href="#date-add-datetime-interval-expr-type" class="header-anchor">#</a> DATE_ADD(datetime, INTERVAL  expr type)</h5> <p>返回与给定日期时间相差INTERVAL时间段的日期时间</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">INTERVAL</span> <span class="token number">3</span> <span class="token keyword">YEAR</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 2024-11-22 12:06:05</span>

<span class="token keyword">SELECT</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">INTERVAL</span> <span class="token operator">-</span><span class="token number">3</span> <span class="token keyword">YEAR</span> <span class="token punctuation">)</span>
<span class="token comment">-- 2018-11-22 12:06:30</span>

<span class="token keyword">SELECT</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">INTERVAL</span> <span class="token operator">-</span><span class="token number">3</span> <span class="token keyword">MONTH</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 2021-08-22 12:06:55</span>

<span class="token keyword">SELECT</span> date_add<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">INTERVAL</span> <span class="token operator">-</span><span class="token number">3</span> <span class="token keyword">DAY</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 2021-11-19 12:07:14</span>
</code></pre></div><table><thead><tr><th>函数</th> <th>用法</th></tr></thead> <tbody><tr><td><strong>CURDATE()</strong> 或 CURRENT_DATE()</td> <td>返回当前日期</td></tr> <tr><td><strong>CURTIME()</strong> 或 CURRENT_TIME()</td> <td>返回当前时间</td></tr> <tr><td>WEEK(date) / WEEKOFYEAR(date)</td> <td>返回一年中的第几周</td></tr> <tr><td>DAYOFWEEK()</td> <td>返回周几，注意：周日是1，周一是2，。。。周六是7</td></tr> <tr><td>WEEKDAY(date)</td> <td>返回周几，注意，周1是0，周2是1，。。。周日是6</td></tr> <tr><td>MONTHNAME(date)</td> <td>返回月份：January，。。。。。</td></tr> <tr><td>DATEDIFF(date1,date2) / TIMEDIFF(time1, time2)</td> <td>返回date1 - date2的日期间隔 / 返回time1 - time2的时间间隔</td></tr> <tr><td>DATE_FORMAT(datetime ,fmt)</td> <td>按照字符串fmt格式化日期datetime值</td></tr> <tr><td>STR_TO_DATE(str, fmt)</td> <td>按照字符串fmt对str进行解析，解析为一个日期</td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 找出员工中入职时间超过5年的老员工</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> t_employee
<span class="token keyword">WHERE</span> hiredate <span class="token operator">&lt;</span> DATE_ADD<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token operator">-</span><span class="token number">5</span> <span class="token keyword">YEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>其中：</p> <p><strong>（1）DATE_ADD(datetime,INTERVAL  expr type)</strong></p> <p>表达式类型：</p> <table><thead><tr><th>参数类型</th> <th>参数类型</th></tr></thead> <tbody><tr><td>YEAR</td> <td>YEAR_MONTH</td></tr> <tr><td>MONTH</td> <td>DAY_HOUR</td></tr> <tr><td>DAY</td> <td>DAY_MINUTE</td></tr> <tr><td>HOUR</td> <td>DAY_SECOND</td></tr> <tr><td>MINUTE</td> <td>HOUR_MINUTE</td></tr> <tr><td>SECOND</td> <td>HOUR_SECOND</td></tr> <tr><td></td> <td>MINUTE_SECOND</td></tr></tbody></table> <p>举例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> DATE_ADD<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token number">1</span> <span class="token keyword">YEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> DATE_ADD<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token keyword">YEAR</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">#可以是负数</span>
<span class="token keyword">SELECT</span> DATE_ADD<span class="token punctuation">(</span><span class="token function">NOW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INTERVAL</span> <span class="token string">'1_1'</span> YEAR_MONTH<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">#需要单引号</span>

</code></pre></div><p><strong>（2）DATE_FORMAT(datetime,fmt) 和 STR_TO_DATE(str, fmt)</strong></p> <table><thead><tr><th>格式符</th> <th>说明</th> <th>格式符</th> <th>说明</th></tr></thead> <tbody><tr><td>%Y</td> <td>4位数字表示年份</td> <td>%y</td> <td>表示两位数字表示年份</td></tr> <tr><td>%M</td> <td>月名表示月份（January,....）</td> <td>%m</td> <td>两位数字表示月份（01,02,03。。。）</td></tr> <tr><td>%b</td> <td>缩写的月名（Jan.，Feb.，....）</td> <td>%c</td> <td>数字表示月份（1,2,3,...）</td></tr> <tr><td>%D</td> <td>英文后缀表示月中的天数（1st,2nd,3rd,...）</td> <td>%d</td> <td>两位数字表示月中的天数(01,02...)</td></tr> <tr><td>%e</td> <td>数字形式表示月中的天数（1,2,3,4,5.....）</td> <td></td> <td></td></tr> <tr><td>%H</td> <td>两位数字表示小数，24小时制（01,02..）</td> <td>%h和%I</td> <td>两位数字表示小时，12小时制（01,02..）</td></tr> <tr><td>%k</td> <td>数字形式的小时，24小时制(1,2,3)</td> <td>%l</td> <td>数字形式表示小时，12小时制（1,2,3,4....）</td></tr> <tr><td>%i</td> <td>两位数字表示分钟（00,01,02）</td> <td>%S和%s</td> <td>两位数字表示秒(00,01,02...)</td></tr> <tr><td>%W</td> <td>一周中的星期名称（Sunday...）</td> <td>%a</td> <td>一周中的星期缩写（Sun.，Mon.,Tues.，..）</td></tr> <tr><td>%w</td> <td>以数字表示周中的天数(0=Sunday,1=Monday....)</td> <td></td> <td></td></tr> <tr><td>%j</td> <td>以3位数字表示年中的天数(001,002...)</td> <td>%U</td> <td>以数字表示年中的第几周，（1,2,3。。）其中Sunday为周中第一天</td></tr> <tr><td>%u</td> <td>以数字表示年中的第几周，（1,2,3。。）其中Monday为周中第一天</td> <td></td> <td></td></tr> <tr><td>%T</td> <td>24小时制</td> <td>%r</td> <td>12小时制</td></tr> <tr><td>%p</td> <td>AM或PM</td> <td>%%</td> <td>表示%</td></tr></tbody></table> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> date_format<span class="token punctuation">(</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'%Y %m %D %H %i %s'</span><span class="token punctuation">)</span>
                         <span class="token number">2020</span> <span class="token number">09</span> <span class="token number">8</span>th <span class="token number">13</span> <span class="token number">56</span> <span class="token number">51</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> str_to_date<span class="token punctuation">(</span><span class="token string">'2020-9-9'</span><span class="token punctuation">,</span> <span class="token string">&quot;%Y-%m-%D&quot;</span><span class="token punctuation">)</span>
<span class="token number">2020</span><span class="token operator">-</span><span class="token number">09</span><span class="token operator">-</span><span class="token number">09</span>
</code></pre></div><h4 id="流程函数"><a href="#流程函数" class="header-anchor">#</a> 流程函数</h4> <h5 id="if-value-t-f"><a href="#if-value-t-f" class="header-anchor">#</a> IF(value,t ,f)</h5> <p>如果value是真，返回t，否则返回f</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 类似Java中的三目运算符</span>
<span class="token comment">-- 对于工资大于等于15000，输出高工资；小于15000的，输出一般工资</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>salary<span class="token punctuation">,</span><span class="token keyword">if</span><span class="token punctuation">(</span>salary<span class="token operator">&gt;=</span><span class="token number">15000</span><span class="token punctuation">,</span><span class="token string">'高工资'</span><span class="token punctuation">,</span><span class="token string">'一般工资'</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
</code></pre></div><h5 id="ifnull-value1-value2"><a href="#ifnull-value1-value2" class="header-anchor">#</a> IFNULL(value1, value2)</h5> <p>如果value1不为空，返回value1，否则返回value2</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 求年薪 年薪=月薪资*12*(1+年终奖比例)</span>
<span class="token comment">-- 但是年终奖比例用为空的情况。</span>
<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span> salary<span class="token punctuation">,</span> <span class="token keyword">IF</span><span class="token punctuation">(</span>salary <span class="token operator">&gt;=</span> <span class="token number">15000</span><span class="token punctuation">,</span> <span class="token string">'高工资'</span><span class="token punctuation">,</span> <span class="token string">'一般工资'</span><span class="token punctuation">)</span> 年薪
<span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
</code></pre></div><h5 id="case-when-条件1-then-result1-when-条件2-then-result2-else-resultn-end"><a href="#case-when-条件1-then-result1-when-条件2-then-result2-else-resultn-end" class="header-anchor">#</a> CASE WHEN 条件1 THEN result1 WHEN 条件2 THEN result2 .... [ELSE resultn] END</h5> <p>相当于Java的 if...else if...else...</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">/*
根据薪水判断等级
&gt;=20000 A
&gt;=15000 B
&gt;=10000 C
&lt;10000 D
*/</span>

<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>
       salary<span class="token punctuation">,</span>
       <span class="token keyword">CASE</span>
           <span class="token keyword">WHEN</span> salary <span class="token operator">&gt;=</span> <span class="token number">20000</span> <span class="token keyword">THEN</span> <span class="token string">'A'</span>
           <span class="token keyword">WHEN</span> salary <span class="token operator">&gt;=</span> <span class="token number">15000</span> <span class="token keyword">THEN</span> <span class="token string">'B'</span>
           <span class="token keyword">WHEN</span> salary <span class="token operator">&gt;=</span> <span class="token number">10000</span> <span class="token keyword">THEN</span> <span class="token string">'C'</span>
           <span class="token keyword">ELSE</span> <span class="token string">'D'</span> <span class="token keyword">END</span> <span class="token string">'薪水等级'</span>
<span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
</code></pre></div><h5 id="case-expr-when-常量值1-then-值1-when-常量值1-then-值1-else-值n-end"><a href="#case-expr-when-常量值1-then-值1-when-常量值1-then-值1-else-值n-end" class="header-anchor">#</a> CASE  expr WHEN 常量值1 THEN 值1 WHEN 常量值1 THEN 值1 .... [ELSE 值n] END</h5> <p>相当于Java的switch...case...</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">/*
job_id 为
1 教学总监
2 运营总监
3 财务总监
4 前台
5 打酱油的
*/</span>

<span class="token keyword">SELECT</span> ename<span class="token punctuation">,</span>
       job_id<span class="token punctuation">,</span>
       <span class="token keyword">CASE</span> job_id
           <span class="token keyword">WHEN</span> <span class="token number">1</span> <span class="token keyword">THEN</span> <span class="token string">'教学总监'</span>
           <span class="token keyword">WHEN</span> <span class="token number">2</span> <span class="token keyword">THEN</span> <span class="token string">'运营总监'</span>
           <span class="token keyword">WHEN</span> <span class="token number">3</span> <span class="token keyword">THEN</span> <span class="token string">'财务总监'</span>
           <span class="token keyword">WHEN</span> <span class="token number">4</span> <span class="token keyword">THEN</span> <span class="token string">'前台'</span>
           <span class="token keyword">ELSE</span> <span class="token string">'打酱油的'</span> <span class="token keyword">END</span> <span class="token string">'title'</span>
<span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
</code></pre></div><h4 id="其他函数"><a href="#其他函数" class="header-anchor">#</a> 其他函数</h4> <p>md5(string)</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> md5<span class="token punctuation">(</span><span class="token string">'badpwd'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">-- 7ad4cdc775b013941114aaf0022a194b</span>
</code></pre></div><h3 id="_10-2-多行-分组函数-group-function"><a href="#_10-2-多行-分组函数-group-function" class="header-anchor">#</a> 10.2 多行/分组函数 group function</h3> <p>多行函数：对一组数据进行运算，针对一组数据（多行记录）只返回一个结果，也称分组函数。</p> <ul><li>多行函数可以写在一起。</li> <li>多行函数会自动忽略null值。</li> <li>多行函数不能嵌套多行函数，单行函数可以和多行函数互相嵌套。</li></ul> <h4 id="avg"><a href="#avg" class="header-anchor">#</a> AVG()</h4> <p>对数值型数据求平均数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
</code></pre></div><h4 id="sum"><a href="#sum" class="header-anchor">#</a> SUM()</h4> <p>对数值型数据求和</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">sum</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
</code></pre></div><h4 id="max"><a href="#max" class="header-anchor">#</a> MAX()</h4> <p>对任意数据类型的数据求最大值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
</code></pre></div><h4 id="min"><a href="#min" class="header-anchor">#</a> MIN()</h4> <p>对任意数据类型的数据求最小值</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">min</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
</code></pre></div><h4 id="count"><a href="#count" class="header-anchor">#</a> COUNT()</h4> <p>对任意数据类型的数据计数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">count</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>

<span class="token comment">-- 统计employee表有多少行数据</span>
<span class="token keyword">SELECT</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
<span class="token comment">/*
1.count(1)与count(*)得到的结果一致，包含null值。
2.count(字段)不计算null值
3.count(null)结果恒为0
&gt; https://blog.csdn.net/lwei_998/article/details/6112810
*/</span>
</code></pre></div><p>单行函数 嵌套多行函数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">round</span><span class="token punctuation">(</span><span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">truncate</span><span class="token punctuation">(</span><span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
</code></pre></div><p>多行函数 嵌套单行函数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">truncate</span><span class="token punctuation">(</span><span class="token function">avg</span><span class="token punctuation">(</span><span class="token keyword">truncate</span><span class="token punctuation">(</span>salary<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
</code></pre></div><h2 id="_11-关联查询"><a href="#_11-关联查询" class="header-anchor">#</a> 11. 关联查询</h2> <p>又称为：联合查询，多表联查。</p> <blockquote><p>https://baike.baidu.com/item/%E7%AC%9B%E5%8D%A1%E5%B0%94%E4%B9%98%E7%A7%AF/6323173</p> <p>笛卡尔积：</p> <p>案例，给出三个域：</p> <p>D1=SUPERVISOR = { 张清玫，刘逸 }</p> <p>D2=SPECIALITY= {计算机专业，信息专业}</p> <p>D3=POSTGRADUATE = {李勇，刘晨，王敏}</p> <p>则D1，D2，D3的笛卡尔积为D：</p> <p>D=D1×D2×D3 ={(张清玫, 计算机专业, 李勇), (张清玫, 计算机专业, 刘晨),</p> <p>(张清玫, 计算机专业, 王敏), (张清玫, 信息专业, 李勇),</p> <p>(张清玫, 信息专业, 刘晨), (张清玫, 信息专业, 王敏),</p> <p>(刘逸, 计算机专业, 李勇), (刘逸, 计算机专业, 刘晨),</p> <p>(刘逸, 计算机专业, 王敏), (刘逸, 信息专业, 李勇),</p> <p>(刘逸, 信息专业, 刘晨), (刘逸, 信息专业, 王敏)}</p> <p>这样就把D1,D2,D3这三个集合中的每个元素加以对应组合，形成庞大的集合群。</p> <p>本个例子中的D中就会有2X2X3个元素，如果一个集合有1000个元素，有这样3个集合，他们的笛卡尔积所组成的新集合会达到十亿个元素。假若某个集合是<a href="https://baike.baidu.com/item/%E6%97%A0%E9%99%90%E9%9B%86" target="_blank" rel="noopener noreferrer">无限集<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，那么新的集合就将是有无限个元素 [2] 。</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 实现笛卡尔积</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_department<span class="token punctuation">;</span>
<span class="token comment">-- 5 rows</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
<span class="token comment">-- 25 rows</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">,</span> t_department<span class="token punctuation">;</span>
<span class="token comment">-- 125=5*25 rows</span>
</code></pre></div></blockquote> <h3 id="_11-1-关联查询的7种结果"><a href="#_11-1-关联查询的7种结果" class="header-anchor">#</a> 11.1 关联查询的7种结果</h3> <blockquote><p>sql joins</p> <p>https://www.runoob.com/sql/sql-join.html</p></blockquote> <p><img src="https://gitee.com/rayywei/blog-image/raw/master/sql-join.png" alt=""></p> <p>（1）A∩B</p> <p>（2）A</p> <p>（3）A -  A∩B</p> <p>（4）B</p> <p>（5）B - A∩B</p> <p>（6）A ∪ B</p> <p>（7）A∪B- A∩B    或者   (A -  A∩B) ∪ （B - A∩B）</p> <h3 id="_11-2-内连接-inner-join"><a href="#_11-2-内连接-inner-join" class="header-anchor">#</a> 11.2 内连接 Inner join</h3> <p>实现A∩B</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- e 和 d 都是表的别名</span>
<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span> e<span class="token punctuation">.</span>did<span class="token punctuation">,</span> d<span class="token punctuation">.</span>did<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dname
<span class="token keyword">FROM</span> t_employee e
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> t_department d<span class="token punctuation">;</span>

<span class="token comment">/*
根据笛卡尔积，出现了1*5条结果，但是只有一条是正确的，即e.did=d.did
孙红雷,8000.46,1,5,后勤部
孙红雷,8000.46,1,2,咨询部
孙红雷,8000.46,1,1,教学部
孙红雷,8000.46,1,4,财务部
孙红雷,8000.46,1,3,运营部
*/</span>

<span class="token comment">-- 所以正确的代码应该是</span>
<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span> e<span class="token punctuation">.</span>did<span class="token punctuation">,</span> d<span class="token punctuation">.</span>did<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dname
<span class="token keyword">FROM</span> t_employee e
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> t_department d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>did <span class="token operator">=</span> d<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- sql99: 将关联条件和筛选条件分开</span>
<span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> A表 <span class="token keyword">inner</span> <span class="token keyword">join</span> B表
<span class="token keyword">on</span> 关联条件
<span class="token keyword">where</span> 筛选条件<span class="token punctuation">;</span>

或

<span class="token comment">-- sql192: 将关联条件和筛选条件使用and连接</span>
<span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> A表 <span class="token punctuation">,</span> B表
<span class="token keyword">where</span> 关联条件 <span class="token operator">and</span> 筛选条件<span class="token punctuation">;</span>
</code></pre></div><h3 id="_11-3-外连接-outer-join"><a href="#_11-3-外连接-outer-join" class="header-anchor">#</a> 11.3 外连接 Outer Join</h3> <h4 id="左外连接-left-join"><a href="#左外连接-left-join" class="header-anchor">#</a> 左外连接 Left Join</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#实现查询结果是A</span>
<span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> A表 <span class="token keyword">left</span> <span class="token keyword">join</span> B表
<span class="token keyword">on</span> 关联条件
<span class="token keyword">where</span> 等其他子句<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> e<span class="token punctuation">.</span>gender<span class="token punctuation">,</span>e<span class="token punctuation">.</span>did<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname
<span class="token keyword">from</span> t_employee e
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> t_department d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>did <span class="token operator">=</span> d<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#实现A -  A∩B</span>
<span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> A表 <span class="token keyword">left</span> <span class="token keyword">join</span> B表
<span class="token keyword">on</span> 关联条件
<span class="token keyword">where</span> 从表关联字段 <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">and</span> 等其他子句<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> e<span class="token punctuation">.</span>gender<span class="token punctuation">,</span>e<span class="token punctuation">.</span>did<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname
<span class="token keyword">from</span> t_employee e
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> t_department d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>did <span class="token operator">=</span> d<span class="token punctuation">.</span>did
<span class="token keyword">WHERE</span> d<span class="token punctuation">.</span>did <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="右外连接-right-join"><a href="#右外连接-right-join" class="header-anchor">#</a> 右外连接 Right join</h4> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#实现查询结果是B</span>
<span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> A表 <span class="token keyword">right</span> <span class="token keyword">join</span> B表
<span class="token keyword">on</span> 关联条件
<span class="token keyword">where</span> 等其他子句<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> e<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> e<span class="token punctuation">.</span>did<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dname
<span class="token keyword">FROM</span> t_employee e
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> t_department d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>did <span class="token operator">=</span> d<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#实现B -  A∩B</span>
<span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> A表 <span class="token keyword">right</span> <span class="token keyword">join</span> B表
<span class="token keyword">on</span> 关联条件
<span class="token keyword">where</span> 从表关联字段 <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">and</span> 等其他子句<span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> e<span class="token punctuation">.</span>gender<span class="token punctuation">,</span> e<span class="token punctuation">.</span>did<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dname
<span class="token keyword">FROM</span> t_employee e
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> t_department d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>did <span class="token operator">=</span> d<span class="token punctuation">.</span>did
<span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>did <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span> <span class="token comment">-- 这里要用e.did</span>
</code></pre></div><h4 id="全外连接-full-outer-join"><a href="#全外连接-full-outer-join" class="header-anchor">#</a> 全外连接 Full Outer Join</h4> <p>mysql使用union代替全外连接</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#实现查询结果是A∪B</span>
<span class="token comment">#左外的A union 右外的B</span>

<span class="token comment">-- 实现A</span>
<span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> A表 <span class="token keyword">left</span> <span class="token keyword">join</span> B表
<span class="token keyword">on</span> 关联条件
<span class="token keyword">where</span> 等其他子句

<span class="token keyword">union</span> <span class="token comment">-- 实现A∪B</span>

<span class="token comment">-- 实现B</span>
<span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> A表 <span class="token keyword">right</span> <span class="token keyword">join</span> B表
<span class="token keyword">on</span> 关联条件
<span class="token keyword">where</span> 等其他子句<span class="token punctuation">;</span>

<span class="token comment">#查询所有员工，所有部门，包括没有员工的部门，和没有部门的员工</span>
<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>e<span class="token punctuation">.</span>did<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname
<span class="token keyword">from</span> t_employee e
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> t_department d <span class="token keyword">on</span> e<span class="token punctuation">.</span>did<span class="token operator">=</span>d<span class="token punctuation">.</span>did

<span class="token keyword">UNION</span>

<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>ename <span class="token punctuation">,</span>e<span class="token punctuation">.</span>did<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname
<span class="token keyword">from</span> t_employee e
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> t_department d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>did <span class="token operator">=</span> d<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#实现A∪B -  A∩B  或   (A -  A∩B) ∪ （B - A∩B）</span>
<span class="token comment">#使用左外的 (A -  A∩B)  union 右外的（B - A∩B）</span>
<span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> A表 <span class="token keyword">left</span> <span class="token keyword">join</span> B表
<span class="token keyword">on</span> 关联条件
<span class="token keyword">where</span> 从表关联字段 <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">and</span> 等其他子句

<span class="token keyword">union</span>

<span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> A表 <span class="token keyword">right</span> <span class="token keyword">join</span> B表
<span class="token keyword">on</span> 关联条件
<span class="token keyword">where</span> 从表关联字段 <span class="token operator">is</span> <span class="token boolean">null</span> <span class="token operator">and</span> 等其他子句

<span class="token comment">#查询那些没有部门的员工和所有没有员工的部门</span>
<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span>e<span class="token punctuation">.</span>did<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname
<span class="token keyword">from</span> t_employee e
<span class="token keyword">LEFT</span> <span class="token keyword">JOIN</span> t_department d <span class="token keyword">on</span> e<span class="token punctuation">.</span>did<span class="token operator">=</span>d<span class="token punctuation">.</span>did
<span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>did <span class="token operator">IS</span> <span class="token boolean">NULL</span>

<span class="token keyword">UNION</span>

<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>ename <span class="token punctuation">,</span>e<span class="token punctuation">.</span>did<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname
<span class="token keyword">from</span> t_employee e
<span class="token keyword">RIGHT</span> <span class="token keyword">JOIN</span> t_department d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>did <span class="token operator">=</span> d<span class="token punctuation">.</span>did
<span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>did <span class="token operator">IS</span> <span class="token boolean">NULL</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_11-4-自连接"><a href="#_11-4-自连接" class="header-anchor">#</a> 11.4 自连接</h3> <p>两个关联查询的表是同一张表，通过取别名的方式来虚拟成两张表</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> 字段列表
<span class="token keyword">from</span> 表名 别名<span class="token number">1</span> <span class="token keyword">inner</span><span class="token operator">/</span><span class="token keyword">left</span><span class="token operator">/</span><span class="token keyword">right</span> <span class="token keyword">join</span> 表名 别名<span class="token number">2</span>
<span class="token keyword">on</span> 别名<span class="token number">1.</span>关联字段 <span class="token operator">=</span> 别名<span class="token number">2</span>的关联字段
<span class="token keyword">where</span> 其他条件

<span class="token comment">#查询员工的编号，姓名，薪资和他领导的编号，姓名，薪资</span>
<span class="token comment">#这些数据全部在员工表中</span>
<span class="token comment">#把t_employee表，即当做员工表，又当做领导表</span>
<span class="token comment">#领导表是虚拟的概念，我们可以通过取别名的方式虚拟</span>
<span class="token keyword">SELECT</span> e1<span class="token punctuation">.</span>eid <span class="token string">'employee id'</span><span class="token punctuation">,</span> e1<span class="token punctuation">.</span>ename <span class="token string">'employee name'</span><span class="token punctuation">,</span> e2<span class="token punctuation">.</span>eid <span class="token string">'manage id'</span><span class="token punctuation">,</span> e2<span class="token punctuation">.</span>ename <span class="token string">'manage name'</span>
<span class="token keyword">FROM</span> t_employee e1
         <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> t_employee e2
                    <span class="token keyword">ON</span> e1<span class="token punctuation">.</span>mid <span class="token operator">=</span> e2<span class="token punctuation">.</span>eid<span class="token punctuation">;</span>
</code></pre></div><h3 id="_11-5-练习"><a href="#_11-5-练习" class="header-anchor">#</a> 11.5 练习</h3> <p>三张表查询</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 查看员工的姓名，员工的id，职位编号，职位名称，部门编号，部门名称</span>

<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> e<span class="token punctuation">.</span>eid<span class="token punctuation">,</span> e<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span> j<span class="token punctuation">.</span>job_name<span class="token punctuation">,</span> e<span class="token punctuation">.</span>did<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dname
<span class="token keyword">FROM</span> t_employee e
         <span class="token keyword">JOIN</span> t_job j
              <span class="token keyword">ON</span> e<span class="token punctuation">.</span>job_id <span class="token operator">=</span> j<span class="token punctuation">.</span>job_id
         <span class="token keyword">JOIN</span> t_department d
              <span class="token keyword">ON</span> e<span class="token punctuation">.</span>did <span class="token operator">=</span> d<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
</code></pre></div><h2 id="_12-select语句的7大子句"><a href="#_12-select语句的7大子句" class="header-anchor">#</a> 12. select语句的7大子句</h2> <h3 id="_7大子句书写顺序"><a href="#_7大子句书写顺序" class="header-anchor">#</a> 7大子句书写顺序</h3> <p>（1）from：从哪些表中筛选，已经拿到了表中的所有数据</p> <p>（2）on：关联多表查询时，去除笛卡尔积</p> <p>（3）where：从表中筛选的条件</p> <p>（4）group by：分组依据</p> <p>（5）having：在统计结果中再次筛选</p> <p>（6）order by：排序</p> <p>（7）limit：分页</p> <p>必须按照（1）-（7）的顺序【编写】子句（编写顺序而不是执行顺序）。</p> <h3 id="group-by与分组函数"><a href="#group-by与分组函数" class="header-anchor">#</a> group by与分组函数</h3> <p>可以使用GROUP BY子句将表中的数据分成若干组</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 根据部门编号分组，找出每个组的最高薪酬额（从多个数据中挑选出一个）</span>
<span class="token keyword">SELECT</span> did<span class="token punctuation">,</span><span class="token function">max</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> t_employee
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> did<span class="token punctuation">;</span> <span class="token comment">-- 使用group by时，select后面至少需要一个分组函数。</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token keyword">column</span><span class="token punctuation">,</span> group_function<span class="token punctuation">(</span><span class="token keyword">column</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span> <span class="token keyword">table</span>
<span class="token punctuation">[</span><span class="token keyword">WHERE</span> condition<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span>	group_by_expression<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> did<span class="token punctuation">,</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> t_employee
<span class="token keyword">WHERE</span> did <span class="token operator">is</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> did<span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>明确：WHERE语句 一定放在FROM后面 GROUP BY 前面</strong></p></blockquote> <p>在SELECT列表中所有未包含在分组函数中的列都应该包含在 GROUP BY子句中</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>   department_id<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">FROM</span>     employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id <span class="token punctuation">;</span>
</code></pre></div><p>包含在 GROUP BY 子句中的列不必包含在SELECT 列表中</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>   <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">FROM</span>     employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id <span class="token punctuation">;</span>
</code></pre></div><h5 id="使用多个列分组"><a href="#使用多个列分组" class="header-anchor">#</a> 使用多个列分组</h5> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span>   department_id dept_id<span class="token punctuation">,</span> job_id<span class="token punctuation">,</span> <span class="token function">SUM</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">FROM</span>     employees
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id<span class="token punctuation">,</span> job_id <span class="token punctuation">;</span>
</code></pre></div><h3 id="having与分组函数"><a href="#having与分组函数" class="header-anchor">#</a> having与分组函数</h3> <p>如果对分组后的结果再次筛选，需要使用having</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>did<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">from</span> t_employee e
<span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>did <span class="token operator">is</span> <span class="token operator">not</span> <span class="token boolean">NULL</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> e<span class="token punctuation">.</span>did
<span class="token keyword">HAVING</span> <span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">12000</span><span class="token punctuation">;</span> <span class="token comment">-- having 后面可以跟group function</span>
</code></pre></div><h3 id="having与where的区别"><a href="#having与where的区别" class="header-anchor">#</a> having与where的区别？</h3> <p>（1）where是从表中筛选的条件，而having是分组（统计）结果中再次筛选</p> <p>（2）where后面不能加“分组/聚合函数”，而having后面可以跟分组函数</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">##统计部门平均工资高于8000的部门和平均工资</span>
<span class="token keyword">SELECT</span>   department_id<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">FROM</span>     employees
<span class="token keyword">WHERE</span>    <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">8000</span> <span class="token comment"># 此行报错：group function is not allowed here</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> department_id<span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">#统计每一个部门，薪资高于10000元的女员工的数量，显示人数超过1人</span>
<span class="token keyword">SELECT</span> did<span class="token punctuation">,</span><span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span>
<span class="token keyword">FROM</span> t_employee
<span class="token keyword">WHERE</span> gender <span class="token operator">=</span><span class="token string">'女'</span> <span class="token operator">AND</span> salary<span class="token operator">&gt;</span><span class="token number">10000</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> did
<span class="token keyword">HAVING</span> <span class="token function">COUNT</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="order-by"><a href="#order-by" class="header-anchor">#</a> order by</h3> <p>order by：</p> <p>降序：desc</p> <p>升序：要么默认，要么加asc</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>did<span class="token punctuation">,</span>d<span class="token punctuation">.</span>dname<span class="token punctuation">,</span><span class="token function">avg</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> t_employee e
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> t_department d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>did <span class="token operator">=</span>d<span class="token punctuation">.</span>did
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> e<span class="token punctuation">.</span>did
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> e<span class="token punctuation">.</span>did <span class="token keyword">ASC</span> <span class="token punctuation">;</span>
</code></pre></div><h3 id="limit"><a href="#limit" class="header-anchor">#</a> limit</h3> <p>limit (pageNumber - 1) * pageSize, pageSize</p> <p>pageNumber: 页数</p> <p>pageSize: 每页显示数量</p> <p>代码示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">/*
每页显示2条 展示第三页
*/</span>
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> emp <span class="token keyword">limit</span> <span class="token number">4</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 求员工的姓名，薪水，部门编号，部门名称，工作编号，工作名称，按照薪水排序，每页显示3条显示第4页</span>
<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>ename<span class="token punctuation">,</span> e<span class="token punctuation">.</span>salary<span class="token punctuation">,</span> e<span class="token punctuation">.</span>did<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dname<span class="token punctuation">,</span> e<span class="token punctuation">.</span>job_id<span class="token punctuation">,</span> j<span class="token punctuation">.</span>job_name
<span class="token keyword">FROM</span> t_employee e
         <span class="token keyword">INNER</span> <span class="token keyword">JOIN</span> t_department d <span class="token keyword">ON</span> e<span class="token punctuation">.</span>did <span class="token operator">=</span> d<span class="token punctuation">.</span>did
         <span class="token keyword">JOIN</span> t_job j <span class="token keyword">ON</span> e<span class="token punctuation">.</span>job_id <span class="token operator">=</span> j<span class="token punctuation">.</span>job_id
<span class="token keyword">ORDER</span> <span class="token keyword">BY</span> e<span class="token punctuation">.</span>salary
<span class="token keyword">LIMIT</span> <span class="token number">9</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_13-子查询"><a href="#_13-子查询" class="header-anchor">#</a> 13. 子查询</h2> <p>嵌套在另一个查询中的查询，根据位置不同，分为：where型，from型，exists型。注意：不管子查询在哪里，子查询必须使用()括起来。</p> <h3 id="where型"><a href="#where型" class="header-anchor">#</a> where型</h3> <p>①子查询是单值结果，那么可以对其使用（=，&gt;等比较运算符）</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">;</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_employee <span class="token keyword">WHERE</span> salary <span class="token operator">=</span> <span class="token number">7000.67</span><span class="token punctuation">;</span>
<span class="token comment">-- 将上面两句合并为一句</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_employee
<span class="token keyword">WHERE</span> salary <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MIN</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>②子查询是多值结果，那么可对其使用（【not】in(子查询结果)，或 &gt;all(子查询结果)，或&gt;=all(子查询结果)，&lt;all(子查询结果)，&lt;=all（子查询结果)，或 &gt;any(子查询结果)，或&gt;=any(子查询结果)，&lt;any(子查询结果)，&lt;=any（子查询结果)）</p> <div class="language-sql extra-class"><pre class="language-sql"><code>查询全公司最高工资的员工信息
<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 员工表 <span class="token keyword">where</span> 薪资 <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">max</span><span class="token punctuation">(</span>薪资<span class="token punctuation">)</span> <span class="token keyword">from</span> 员工表<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 员工表 <span class="token keyword">where</span> 薪资 <span class="token operator">&gt;</span> <span class="token keyword">all</span><span class="token punctuation">(</span><span class="token keyword">select</span> salary <span class="token keyword">from</span> 员工表  <span class="token keyword">where</span> 员工编号 <span class="token operator">in</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 查询比孙红雷、黄晓明、迪丽热巴工资都高的员工。</span>
<span class="token comment">-- 这三个人的工资为</span>
<span class="token keyword">SELECT</span> salary <span class="token keyword">FROM</span> t_employee <span class="token keyword">WHERE</span> ename <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'孙红雷'</span><span class="token punctuation">,</span><span class="token string">'黄晓明'</span><span class="token punctuation">,</span><span class="token string">'迪丽热巴'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 方式一 使用max函数</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> t_employee
<span class="token keyword">WHERE</span> salary <span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">MAX</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> <span class="token keyword">FROM</span> t_employee <span class="token keyword">WHERE</span> ename <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'孙红雷'</span><span class="token punctuation">,</span> <span class="token string">'黄晓明'</span><span class="token punctuation">,</span> <span class="token string">'迪丽热巴'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 方式二 不使用max函数，使用all关键字</span>
<span class="token comment">-- all 包含所有结果 &gt; all 比所有结果都大</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> t_employee
<span class="token keyword">WHERE</span> salary <span class="token operator">&gt;</span> <span class="token keyword">ALL</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> salary <span class="token keyword">FROM</span> t_employee <span class="token keyword">WHERE</span> ename <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'孙红雷'</span><span class="token punctuation">,</span> <span class="token string">'黄晓明'</span><span class="token punctuation">,</span> <span class="token string">'迪丽热巴'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">-- 查询比 孙红雷 或 黄晓明 或 迪丽热巴 工资高的员工。</span>
<span class="token comment">-- any 任意一个 &gt; any 比最小的值大即可</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span>
<span class="token keyword">FROM</span> t_employee
<span class="token keyword">WHERE</span> salary <span class="token operator">&gt;</span> <span class="token keyword">ANY</span> <span class="token punctuation">(</span><span class="token keyword">SELECT</span> salary <span class="token keyword">FROM</span> t_employee <span class="token keyword">WHERE</span> ename <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token string">'孙红雷'</span><span class="token punctuation">,</span> <span class="token string">'黄晓明'</span><span class="token punctuation">,</span> <span class="token string">'迪丽热巴'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="from型"><a href="#from型" class="header-anchor">#</a> from型</h3> <p>子查询的结果是多行多列的结果，类似于一张表格。</p> <p>必须给子查询取别名，即临时表名，表的别名不要加“”和空格。</p> <div class="language-sql extra-class"><pre class="language-sql"><code>查询每个部门的编号，名称，平均工资
<span class="token keyword">select</span> 部门编号<span class="token punctuation">,</span> 部门名称， 平均工资
<span class="token keyword">from</span> 部门表 <span class="token keyword">inner</span> <span class="token keyword">join</span> <span class="token punctuation">(</span><span class="token keyword">select</span> 部门编号，<span class="token function">avg</span><span class="token punctuation">(</span>薪资<span class="token punctuation">)</span> <span class="token keyword">from</span> 员工表  <span class="token keyword">group</span> <span class="token keyword">by</span> 部门编号<span class="token punctuation">)</span> <span class="token keyword">temp</span>
<span class="token keyword">on</span> 部门表<span class="token punctuation">.</span>部门编号 <span class="token operator">=</span> <span class="token keyword">temp</span><span class="token punctuation">.</span>部门编号
</code></pre></div><div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># 求每一个部门的平均薪水 和 部门名称</span>
<span class="token comment">-- 部门id和平均薪水</span>
<span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>did<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> t_employee e
<span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>did <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> e<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
<span class="token comment">-- 将上面的查询结果作为一张子表使用,和部门表一起得到想要的数据</span>
<span class="token keyword">SELECT</span> d<span class="token punctuation">.</span>did<span class="token punctuation">,</span> d<span class="token punctuation">.</span>dname<span class="token punctuation">,</span> <span class="token keyword">temp</span><span class="token punctuation">.</span>average_salary
<span class="token keyword">FROM</span> t_department d
         <span class="token keyword">JOIN</span> <span class="token punctuation">(</span>
    <span class="token keyword">SELECT</span> e<span class="token punctuation">.</span>did<span class="token punctuation">,</span> <span class="token function">AVG</span><span class="token punctuation">(</span>salary<span class="token punctuation">)</span> average_salary
    <span class="token keyword">FROM</span> t_employee e
    <span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>did <span class="token operator">IS</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span>
    <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> e<span class="token punctuation">.</span>did
<span class="token punctuation">)</span> <span class="token keyword">temp</span>
              <span class="token keyword">ON</span> d<span class="token punctuation">.</span>did <span class="token operator">=</span> <span class="token keyword">temp</span><span class="token punctuation">.</span>did
<span class="token keyword">GROUP</span> <span class="token keyword">BY</span> d<span class="token punctuation">.</span>did<span class="token punctuation">;</span>
</code></pre></div><h3 id="exists型"><a href="#exists型" class="header-anchor">#</a> exists型</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>查询那些有员工的部门
<span class="token keyword">select</span> 部门编号<span class="token punctuation">,</span> 部门名称 <span class="token keyword">from</span> 部门表
<span class="token keyword">where</span> <span class="token keyword">exists</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token operator">*</span> <span class="token keyword">from</span> 员工表  <span class="token keyword">where</span> 部门表<span class="token punctuation">.</span>部门编号 <span class="token operator">=</span> 员工表<span class="token punctuation">.</span>部门编号<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_department d
<span class="token comment">-- 当员工表引用部门表的did时，说明这个部门有员工的。</span>
<span class="token keyword">WHERE</span> <span class="token keyword">exists</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> t_employee e <span class="token keyword">WHERE</span> e<span class="token punctuation">.</span>did <span class="token operator">=</span> d<span class="token punctuation">.</span>did<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="_14-transaction-事务"><a href="#_14-transaction-事务" class="header-anchor">#</a> 14. Transaction 事务</h2> <h3 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h3> <h4 id="事务处理-事务操作"><a href="#事务处理-事务操作" class="header-anchor">#</a> 事务处理（事务操作）</h4> <p>保证所有事务都作为一个工作单元来执行，即使出现了故障，都不能改变这种执行方式。当在一个事务中执行多个操作时，要么所有的事务都被提交(commit)，那么这些修改就永久地保存下来；要么数据库管理系统将放弃所作的所有修改，整个事务回滚(rollback)到最初状态。</p> <blockquote><p>例如转账操作：</p> <p>A账户要转账给B账户，那么A账户上减少的钱数和B账户上增加的钱数必须一致，也就是说A账户的转出操作和B账户的转入操作要么全部执行，要么全不执行；</p> <p>如果其中一个操作出现异常而没有执行的话，就会导致账户A和账户B的转入转出金额不一致的情况。而事实上这种情况是不允许发生的，所以为了防止这种情况的发生，需要使用事务处理。</p></blockquote> <h4 id="事务的acid属性"><a href="#事务的acid属性" class="header-anchor">#</a> 事务的ACID属性</h4> <ol><li>原子性（Atomicity）：一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。</li> <li>一致性（Consistency）:在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。</li> <li>隔离性（Isolation）:数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。</li> <li>持久性（Durability）:事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。</li></ol> <h3 id="开启和结束事务"><a href="#开启和结束事务" class="header-anchor">#</a> 开启和结束事务</h3> <p>1、用 BEGIN, ROLLBACK, COMMIT来实现</p> <ul><li>START TRANSACTION 或 BEGIN 开始一个事务</li> <li>ROLLBACK 事务回滚</li> <li>COMMIT 事务确认</li></ul> <p>2、直接用 SET 来改变 MySQL 的自动提交模式:</p> <ul><li>SET AUTOCOMMIT=0/FALSE 禁止自动提交，开启事务</li> <li>SET AUTOCOMMIT=1/TRUE 开启自动提交，关闭事务</li></ul> <p>3、注意：</p> <p>事务的回滚只对DML语句（数据的增删改查）有效，对于DDL语句无效。</p> <p>4、mysql默认是自动提交，执行一句就提交一句。</p> <p>即默认情况下，每一条sql都是一个独立的sql。</p> <h3 id="事务隔离级别"><a href="#事务隔离级别" class="header-anchor">#</a> 事务隔离级别</h3> <h4 id="_1、事务并发问题"><a href="#_1、事务并发问题" class="header-anchor">#</a> 1、事务并发问题</h4> <p>对于同时运行的多个事务, 当这些事务访问数据库中相同的数据时, 如果没有采取必要的隔离机制, 就会导致各种并发问题:</p> <ul><li><strong>脏读</strong>: 对于两个事务 T1, T2, T1 读取了已经被 T2 更新但还<strong>没有被提交</strong>的字段。 之后, 若 T2 回滚, T1读取的内容就是临时且无效的。</li></ul> <p><img src="/Users/raywei/Desktop/%E5%B0%9A%E7%A1%85%E8%B0%B7/%E6%BA%90%E7%A0%81%E4%B8%8E%E7%AC%94%E8%AE%B0/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/day024mysql01/%E7%AC%94%E8%AE%B0/imgs%5C1599461151424.png" alt="1599461151424"></p> <ul><li><strong>不可重复读</strong>: 对于两个事务T1, T2, T1 读取了一个字段, 然后 T2 <strong>更新/修改</strong>了该字段。 之后, T1再次读取同一个字段, 值就不同了。</li></ul> <p><img src="/Users/raywei/Desktop/%E5%B0%9A%E7%A1%85%E8%B0%B7/%E6%BA%90%E7%A0%81%E4%B8%8E%E7%AC%94%E8%AE%B0/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/day024mysql01/%E7%AC%94%E8%AE%B0/imgs%5C1599461170319.png" alt="1599461170319"></p> <ul><li><strong>幻读</strong>: 对于两个事务T1, T2, T1 从一个表中读取了一个字段, 然后 T2 在该表中<strong>插入/删除</strong>了一些新的行。 之后, 如果 T1 再次读取同一个表, 就会多/少几行。</li></ul> <p><img src="/Users/raywei/Desktop/%E5%B0%9A%E7%A1%85%E8%B0%B7/%E6%BA%90%E7%A0%81%E4%B8%8E%E7%AC%94%E8%AE%B0/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/day024mysql01/%E7%AC%94%E8%AE%B0/imgs%5C1599461184631.png" alt="1599461184631"></p> <p><em><strong>不可重复度和幻读区别：</strong></em></p> <p>不可重复读的重点是修改，幻读的重点在于新增或者删除。</p> <p><em><strong>解决不可重复读的问题只需锁住满足条件的行，解决幻读需要锁表</strong></em></p> <p>例1（同样的条件, 你读取过的数据, 再次读取出来发现值不一样了 ）：事务1中的A先生读取自己的工资为 1000的操作还没完成，事务2中的B先生就修改了A的工资为2000，导致A再读自己的工资时工资变为 2000；这就是不可重复读。</p> <p>例2（同样的条件, 第1次和第2次读出来的记录数不一样 ）：假某工资单表中工资大于3000的有4人，事务1读取了所有工资大于3000的人，共查到4条记录，这时事务2 又插入了一条工资大于3000的记录，事务1再次读取时查到的记录就变为了5条，这样就导致了幻读</p> <h4 id="_2、事务隔离级别"><a href="#_2、事务隔离级别" class="header-anchor">#</a> 2、事务隔离级别</h4> <p><strong>数据库事务的隔离性</strong>：数据库系统必须具有隔离并发运行各个事务的能力, 使它们不会相互影响, 避免各种并发问题。**一个事务与其他事务隔离的程度称为隔离级别。**数据库规定了多种事务隔离级别, 不同隔离级别对应不同的干扰程度, 隔离级别越高, 数据一致性就越好, 但并发性越弱。</p> <p><strong>数据库提供的 4 种事务隔离级别：</strong></p> <table><thead><tr><th>隔离级别</th> <th>描述</th></tr></thead> <tbody><tr><td>read-uncommitted</td> <td>允许A事务读取其他事务未提交和已提交的数据。会出现***脏读、不可重复读、幻读***问题</td></tr> <tr><td>read-committed</td> <td>只允许A事务读取其他事务已提交的数据。可以避免脏读，但仍然会出现***不可重复读、幻读***问题</td></tr> <tr><td>repeatable-read</td> <td>确保事务可以多次从一个字段中读取相同的值。在这个事务持续期间，禁止其他事务对这个字段进行更新。可以避免脏读和不可重复读。但是幻读问题仍然存在。<br>mysql中，此项已经解决幻读。</td></tr> <tr><td>serializable</td> <td>确保事务可以从一个表中读取相同的行，相同的记录。在这个事务持续期间，禁止其他事务对该表执行插入、更新、删除操作。所有并发问题都可以避免，但性能十分低下。</td></tr></tbody></table> <ul><li>Oracle 支持的 2 种事务隔离级别：<strong>READ-COMMITED</strong>, SERIALIZABLE。 Oracle 默认的事务隔离级别为: READ COMMITED 。</li> <li>Mysql 支持 4 种事务隔离级别。 Mysql 默认的事务隔离级别为: <strong>REPEATABLE-READ</strong>。在mysql中REPEATABLE READ的隔离级别也可以避免幻读了。</li></ul> <h4 id="_3、设置和查看隔离级别"><a href="#_3、设置和查看隔离级别" class="header-anchor">#</a> 3、设置和查看隔离级别</h4> <p>每启动一个 mysql 程序, 就会获得一个单独的数据库连接。每个数据库连接都有一个变量 @@tx_isolation, 表示当前连接的事务隔离级别。mysql服务也有一个全局变量@@global.tx_isolation，表示所有连接的默认事务隔离级别。</p> <p>查看当前mysql连接的隔离级别:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># version 8.0.18</span>
<span class="token keyword">SELECT</span> @<span class="token variable">@transaction_isolation</span><span class="token punctuation">;</span>
<span class="token comment">-- 或</span>
<span class="token keyword">SHOW</span> VARIABLES <span class="token operator">LIKE</span> <span class="token string">'%iso%'</span><span class="token punctuation">;</span>

<span class="token comment"># version 5.7</span>
<span class="token keyword">select</span> @<span class="token variable">@tx_isolation</span><span class="token punctuation">;</span>
</code></pre></div><p>查看全局的隔离级别：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># version 8.0.18</span>
<span class="token keyword">SELECT</span> @<span class="token variable">@global.transaction_isolation</span><span class="token punctuation">;</span>

<span class="token comment"># version 5.7</span>
<span class="token keyword">select</span> @<span class="token variable">@global.tx_isolation</span><span class="token punctuation">;</span>
</code></pre></div><p>设置当前 mysql连接的隔离级别:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># version 8.0.18</span>
<span class="token keyword">SET</span> <span class="token keyword">SESSION</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token keyword">READ</span> <span class="token keyword">COMMITTED</span><span class="token punctuation">;</span>

<span class="token comment"># version 5.7</span>
<span class="token keyword">set</span> tx_isolation <span class="token operator">=</span><span class="token string">'repeatable-read'</span><span class="token punctuation">;</span>
</code></pre></div><p>设置数据库系统的全局的隔离级别（下次会话生效）:</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment"># version 8.0.18</span>
<span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> <span class="token keyword">TRANSACTION</span> <span class="token keyword">ISOLATION</span> <span class="token keyword">LEVEL</span> <span class="token keyword">READ</span> <span class="token keyword">COMMITTED</span><span class="token punctuation">;</span>

<span class="token comment"># version 5.7</span>
<span class="token keyword">set</span> <span class="token keyword">global</span> tx_isolation <span class="token operator">=</span><span class="token string">'read-committed'</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注意：这里的隔离级别中间是减号，不是下划线。</p></blockquote> <h2 id="_15-用户与权限"><a href="#_15-用户与权限" class="header-anchor">#</a> 15. 用户与权限</h2> <p>用户</p> <p>公司职员（根据岗位分配角色）</p> <p>角色：权限的集合 （mysql8才有）</p> <p>经理，财务，人事。</p> <p>权限</p> <p>查看数据、修改数据等</p> <h3 id="身份认证"><a href="#身份认证" class="header-anchor">#</a> 身份认证</h3> <p>（1）IP+用户名作为身份验证</p> <p>​	例如：</p> <p>​        root@localhost：只允许在本机使用root用户登录</p> <p>​		root@%：运行在任意机器上使用root用户登录</p> <p>​		root@192.168.11.56：只运行在192.168.11.56这个ip的主机上使用root用户登录</p> <p>​		gjz@%：运行在任意机器上使用gjz用户登录</p> <blockquote><p>建立用户时，用于身份验证的IP地址，是连接你的服务的客户端的IP地址</p> <p>例如：root@192.168.11.56，表示客户端在192.168.11.56的机器上可以访问你的mysql服务</p> <p>而这个客户端，要连接你的服务时，-h后面的主机的IP地址是，服务器所在的机器的IP地址。</p> <p>例如：mysql服务在192.168.11.11机器上，客户端在192.168.11.56上，那么客户端可以用root@192.168.11.56或root@%，连接时填写mysql -h192.168.11.11 -u root -p密码</p></blockquote> <p>（2）密码</p> <h3 id="分配权限"><a href="#分配权限" class="header-anchor">#</a> 分配权限</h3> <h4 id="_1、用户权限有4个权限级别"><a href="#_1、用户权限有4个权限级别" class="header-anchor">#</a> 1、用户权限有4个权限级别</h4> <p>（1）全局</p> <p>（2）数据库</p> <p>（3）表</p> <p>（4）字段</p> <p>依次校验权限，如果前面通过了，后面就不校验了：</p> <p>全局 &gt; 数据库 &gt; 表 &gt; 字段</p> <blockquote><p>注意：root@localhost，这个用户始终保留所有的全局权限。</p></blockquote> <h4 id="_2、查看账户权限"><a href="#_2、查看账户权限" class="header-anchor">#</a> 2、查看账户权限</h4> <div class="language- extra-class"><pre class="language-text"><code>show grants for '用户名'@'主机IP地址';
</code></pre></div><h4 id="_3、新建用户和删除用户"><a href="#_3、新建用户和删除用户" class="header-anchor">#</a> 3、新建用户和删除用户</h4> <p><img src="/Users/raywei/Desktop/%E5%B0%9A%E7%A1%85%E8%B0%B7/%E6%BA%90%E7%A0%81%E4%B8%8E%E7%AC%94%E8%AE%B0/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/day024mysql01/%E7%AC%94%E8%AE%B0/imgs/1561009788685.png" alt="1561009788685"></p> <p><img src="/Users/raywei/Desktop/%E5%B0%9A%E7%A1%85%E8%B0%B7/%E6%BA%90%E7%A0%81%E4%B8%8E%E7%AC%94%E8%AE%B0/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/day024mysql01/%E7%AC%94%E8%AE%B0/imgs/1561009769163.png" alt="1561009769163"></p> <p>对应的语句：</p> <div class="language- extra-class"><pre class="language-text"><code>CREATE USER '用户名'@'主机IP地址' IDENTIFIED BY '123456';
</code></pre></div><blockquote><p>如果主机IP地址写：</p> <p>（1）192.168.29.53，就仅限于在该IP登录</p> <p>（2）%，就表示可以从任意IP登录</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>drop user '用户名'@'主机IP地址';
</code></pre></div><h4 id="_4、授予和收回权限"><a href="#_4、授予和收回权限" class="header-anchor">#</a> 4、授予和收回权限</h4> <p><img src="/Users/raywei/Desktop/%E5%B0%9A%E7%A1%85%E8%B0%B7/%E6%BA%90%E7%A0%81%E4%B8%8E%E7%AC%94%E8%AE%B0/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/2.%E6%95%B0%E6%8D%AE%E5%BA%93%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF/day024mysql01/%E7%AC%94%E8%AE%B0/imgs/1561009821823.png" alt="1561009821823"></p> <p>对应语句：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">GRANT</span> 权限列表 <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'用户名'</span><span class="token variable">@'主机IP地址'</span><span class="token punctuation">;</span>  <span class="token comment">#全局</span>
<span class="token keyword">GRANT</span> 权限列表 <span class="token keyword">ON</span> 数据库名<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'用户名'</span><span class="token variable">@'主机IP地址'</span><span class="token punctuation">;</span> <span class="token comment">#某个库</span>
<span class="token keyword">GRANT</span> 权限列表 <span class="token keyword">ON</span> 数据库名<span class="token punctuation">.</span>表格 <span class="token keyword">TO</span> <span class="token string">'用户名'</span><span class="token variable">@'主机IP地址'</span><span class="token punctuation">;</span> <span class="token comment">#某个库的某个表</span>
<span class="token keyword">GRANT</span> 权限列表 <span class="token keyword">ON</span> 表名<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'用户名'</span><span class="token variable">@'主机IP地址'</span><span class="token punctuation">;</span>  <span class="token comment">#某个表的字段</span>
</code></pre></div><p>例如：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'gao'</span><span class="token variable">@'192.168.29.53'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token keyword">ON</span> <span class="token identifier"><span class="token punctuation">`</span>test<span class="token punctuation">`</span></span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'gao'</span><span class="token variable">@'192.168.29.53'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">UPDATE</span> <span class="token keyword">ON</span> <span class="token identifier"><span class="token punctuation">`</span>test<span class="token punctuation">`</span></span><span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>t_department<span class="token punctuation">`</span></span> <span class="token keyword">TO</span> <span class="token string">'gao'</span><span class="token variable">@'192.168.29.53'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">UPDATE</span> <span class="token keyword">ON</span> <span class="token identifier"><span class="token punctuation">`</span>t_department<span class="token punctuation">`</span></span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">TO</span> <span class="token string">'gao'</span><span class="token variable">@'192.168.29.53'</span><span class="token punctuation">;</span>
<span class="token keyword">GRANT</span> <span class="token keyword">SELECT</span> <span class="token punctuation">(</span>tid<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">INSERT</span> <span class="token punctuation">(</span>tid<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">UPDATE</span> <span class="token punctuation">(</span>tid<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">REFERENCES</span> <span class="token punctuation">(</span>tid<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token identifier"><span class="token punctuation">`</span>1101db<span class="token punctuation">`</span></span><span class="token punctuation">.</span><span class="token identifier"><span class="token punctuation">`</span>course<span class="token punctuation">`</span></span> <span class="token keyword">TO</span> <span class="token string">'gao'</span><span class="token variable">@'192.168.29.30'</span><span class="token punctuation">;</span>
</code></pre></div><p>收回权限：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">revoke</span> 权限列表 <span class="token keyword">ON</span> <span class="token operator">*</span><span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'用户名'</span><span class="token variable">@'主机IP地址'</span><span class="token punctuation">;</span>
<span class="token keyword">revoke</span> 权限列表 <span class="token keyword">ON</span> 数据库名<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'用户名'</span><span class="token variable">@'主机IP地址'</span><span class="token punctuation">;</span>
<span class="token keyword">revoke</span> 权限列表 <span class="token keyword">ON</span> 数据库名<span class="token punctuation">.</span>表格 <span class="token keyword">from</span> <span class="token string">'用户名'</span><span class="token variable">@'主机IP地址'</span><span class="token punctuation">;</span>
<span class="token keyword">revoke</span> 权限列表 <span class="token keyword">ON</span> 表名<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> <span class="token string">'用户名'</span><span class="token variable">@'主机IP地址'</span><span class="token punctuation">;</span>
</code></pre></div></div></section> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">3/20/2022, 11:27:17 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><a href="/db-nf/" class="prev">
            数据库设计的三大范式
          </a></span> <span class="next"><a href="/redis-commandline/">
            Redis命令行操作
          </a></span></p></div> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:12rem;" data-v-cb1513f6><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_1-概述" class="sidebar-link reco-side-_1-概述" data-v-cb1513f6>1. 概述</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_1-1-开放源代码" class="sidebar-link reco-side-_1-1-开放源代码" data-v-cb1513f6>1.1. 开放源代码</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_1-2-跨平台" class="sidebar-link reco-side-_1-2-跨平台" data-v-cb1513f6>1.2. 跨平台</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_1-3-轻量级" class="sidebar-link reco-side-_1-3-轻量级" data-v-cb1513f6>1.3. 轻量级</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_1-4-成本低" class="sidebar-link reco-side-_1-4-成本低" data-v-cb1513f6>1.4. 成本低</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_2-常见命令" class="sidebar-link reco-side-_2-常见命令" data-v-cb1513f6>2. 常见命令</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_3-数据类型" class="sidebar-link reco-side-_3-数据类型" data-v-cb1513f6>3. 数据类型</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_3-1-整数类型" class="sidebar-link reco-side-_3-1-整数类型" data-v-cb1513f6>3.1 整数类型</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_3-2-浮点型" class="sidebar-link reco-side-_3-2-浮点型" data-v-cb1513f6>3.2 浮点型</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_3-3-日期时间类型" class="sidebar-link reco-side-_3-3-日期时间类型" data-v-cb1513f6>3.3 日期时间类型</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_3-4-字符串类型" class="sidebar-link reco-side-_3-4-字符串类型" data-v-cb1513f6>3.4 字符串类型</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_4-语法要求" class="sidebar-link reco-side-_4-语法要求" data-v-cb1513f6>4. 语法要求</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#不区分大小写" class="sidebar-link reco-side-不区分大小写" data-v-cb1513f6>不区分大小写</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#命名规则" class="sidebar-link reco-side-命名规则" data-v-cb1513f6>命名规则</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#书写规则" class="sidebar-link reco-side-书写规则" data-v-cb1513f6>书写规则</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_5-语言分类" class="sidebar-link reco-side-_5-语言分类" data-v-cb1513f6>5. 语言分类</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_5-1-ddl" class="sidebar-link reco-side-_5-1-ddl" data-v-cb1513f6>5.1 DDL</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_5-2-dml" class="sidebar-link reco-side-_5-2-dml" data-v-cb1513f6>5.2 DML</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_5-3-dql" class="sidebar-link reco-side-_5-3-dql" data-v-cb1513f6>5.3 DQL</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_5-4-dcl" class="sidebar-link reco-side-_5-4-dcl" data-v-cb1513f6>5.4 DCL</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_6-导入与导出" class="sidebar-link reco-side-_6-导入与导出" data-v-cb1513f6>6. 导入与导出</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#导出" class="sidebar-link reco-side-导出" data-v-cb1513f6>导出</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#导入外部的数据" class="sidebar-link reco-side-导入外部的数据" data-v-cb1513f6>导入外部的数据</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_7-运算符" class="sidebar-link reco-side-_7-运算符" data-v-cb1513f6>7. 运算符</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_7-1-算术运算符" class="sidebar-link reco-side-_7-1-算术运算符" data-v-cb1513f6>7.1 算术运算符</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_7-2-比较运算符" class="sidebar-link reco-side-_7-2-比较运算符" data-v-cb1513f6>7.2 比较运算符</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_7-3-逻辑运算符" class="sidebar-link reco-side-_7-3-逻辑运算符" data-v-cb1513f6>7.3 逻辑运算符</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_8-范围" class="sidebar-link reco-side-_8-范围" data-v-cb1513f6>8. 范围</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_8-1-区间范围" class="sidebar-link reco-side-_8-1-区间范围" data-v-cb1513f6>8.1 区间范围</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_8-2-集合范围" class="sidebar-link reco-side-_8-2-集合范围" data-v-cb1513f6>8.2 集合范围</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_8-3-模糊查询和正则匹配" class="sidebar-link reco-side-_8-3-模糊查询和正则匹配" data-v-cb1513f6>8.3 模糊查询和正则匹配</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_8-4-位运算符" class="sidebar-link reco-side-_8-4-位运算符" data-v-cb1513f6>8.4 位运算符</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_8-5-特殊的null值处理" class="sidebar-link reco-side-_8-5-特殊的null值处理" data-v-cb1513f6>8.5 特殊的null值处理</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_9-约束与索引" class="sidebar-link reco-side-_9-约束与索引" data-v-cb1513f6>9. 约束与索引</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_9-1-约束与索引的概念" class="sidebar-link reco-side-_9-1-约束与索引的概念" data-v-cb1513f6>9.1 约束与索引的概念</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_9-2-ddl-v2-0" class="sidebar-link reco-side-_9-2-ddl-v2-0" data-v-cb1513f6>9.2 DDL(v2.0)</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_9-3-dml-v2-0" class="sidebar-link reco-side-_9-3-dml-v2-0" data-v-cb1513f6>9.3 DML(v2.0)</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_10-函数-function" class="sidebar-link reco-side-_10-函数-function" data-v-cb1513f6>10. 函数 function</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_10-1-单行函数-single-line-function" class="sidebar-link reco-side-_10-1-单行函数-single-line-function" data-v-cb1513f6>10.1 单行函数 Single line function</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_10-2-多行-分组函数-group-function" class="sidebar-link reco-side-_10-2-多行-分组函数-group-function" data-v-cb1513f6>10.2 多行/分组函数 group function</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_11-关联查询" class="sidebar-link reco-side-_11-关联查询" data-v-cb1513f6>11. 关联查询</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_11-1-关联查询的7种结果" class="sidebar-link reco-side-_11-1-关联查询的7种结果" data-v-cb1513f6>11.1 关联查询的7种结果</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_11-2-内连接-inner-join" class="sidebar-link reco-side-_11-2-内连接-inner-join" data-v-cb1513f6>11.2 内连接 Inner join</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_11-3-外连接-outer-join" class="sidebar-link reco-side-_11-3-外连接-outer-join" data-v-cb1513f6>11.3 外连接 Outer Join</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_11-4-自连接" class="sidebar-link reco-side-_11-4-自连接" data-v-cb1513f6>11.4 自连接</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_11-5-练习" class="sidebar-link reco-side-_11-5-练习" data-v-cb1513f6>11.5 练习</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_12-select语句的7大子句" class="sidebar-link reco-side-_12-select语句的7大子句" data-v-cb1513f6>12. select语句的7大子句</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#_7大子句书写顺序" class="sidebar-link reco-side-_7大子句书写顺序" data-v-cb1513f6>7大子句书写顺序</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#group-by与分组函数" class="sidebar-link reco-side-group-by与分组函数" data-v-cb1513f6>group by与分组函数</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#having与分组函数" class="sidebar-link reco-side-having与分组函数" data-v-cb1513f6>having与分组函数</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#having与where的区别" class="sidebar-link reco-side-having与where的区别" data-v-cb1513f6>having与where的区别？</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#order-by" class="sidebar-link reco-side-order-by" data-v-cb1513f6>order by</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#limit" class="sidebar-link reco-side-limit" data-v-cb1513f6>limit</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_13-子查询" class="sidebar-link reco-side-_13-子查询" data-v-cb1513f6>13. 子查询</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#where型" class="sidebar-link reco-side-where型" data-v-cb1513f6>where型</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#from型" class="sidebar-link reco-side-from型" data-v-cb1513f6>from型</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#exists型" class="sidebar-link reco-side-exists型" data-v-cb1513f6>exists型</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_14-transaction-事务" class="sidebar-link reco-side-_14-transaction-事务" data-v-cb1513f6>14. Transaction 事务</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#概述" class="sidebar-link reco-side-概述" data-v-cb1513f6>概述</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#开启和结束事务" class="sidebar-link reco-side-开启和结束事务" data-v-cb1513f6>开启和结束事务</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#事务隔离级别" class="sidebar-link reco-side-事务隔离级别" data-v-cb1513f6>事务隔离级别</a></li><li class="level-2" data-v-cb1513f6><a href="/all-about-mysql/#_15-用户与权限" class="sidebar-link reco-side-_15-用户与权限" data-v-cb1513f6>15. 用户与权限</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#身份认证" class="sidebar-link reco-side-身份认证" data-v-cb1513f6>身份认证</a></li><li class="level-3" data-v-cb1513f6><a href="/all-about-mysql/#分配权限" class="sidebar-link reco-side-分配权限" data-v-cb1513f6>分配权限</a></li></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.a56c6d1d.js" defer></script><script src="/assets/js/3.16bfab84.js" defer></script><script src="/assets/js/1.92468ed9.js" defer></script><script src="/assets/js/20.3486b5a0.js" defer></script>
  </body>
</html>
